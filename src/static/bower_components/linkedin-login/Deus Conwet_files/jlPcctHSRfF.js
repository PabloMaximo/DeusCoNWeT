/*!CK:712634606!*//*1430777452,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["REkGt"]); }

__d("AppAcquisitionSourceCategory",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={AD_NETWORK_FACEBOOK:"ad_fb",ORGANIC_FACEBOOK:"organic_fb",UNKNOWN:"u"};},null);
__d("AppEventClientFilter",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={android:["android"],ios:["iphone","ipad","ios_unknown"],mweb:["mtablet","mbasic","mtouch","mapp"],web:["web"],fbcanvas:["fbcanvas"],fbpixel:["fbpixel"],other:["unknown","mob_unknown"]};},null);
__d("AppEventField",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={ANALYTICS_PARTNER_APP_ID:"_analyticsPartnerAppid",APP_VERSION:"_appVersion",EVENT_NAME:"_eventName",IMPLICITLY_LOGGED:"_implicitlyLogged",IS_TIMED_EVENT:"_isTimedEvent",LOG_TIME:"_logTime",UI:"_ui",VALUE_TO_SUM:"_valueToSum"};},null);
__d("InsightsCodeSnippet",["React"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g.createClass({displayName:"InsightsCodeSnippet",onClick:function(){g.findDOMNode(this.refs.textarea).focus();g.findDOMNode(this.refs.textarea).select();},render:function(){return (g.createElement("div",{className:"fbInsightsCodeSnippet",onClick:this.onClick},g.createElement("div",{className:"topEdge"}),g.createElement("div",{className:"bottomEdge"}),g.createElement("textarea",{row:"1",readOnly:true,ref:"textarea",wrap:"off",value:this.props.code})));}});e.exports=h;},null);
__d("InsightsLegendColoredCheckbox.react",["Image.react","Keys","React","cx","emptyFunction","joinClasses","xuiglyph"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=i,o=n.PropTypes,p=i.createClass({displayName:"InsightsLegendColoredCheckbox",propTypes:{checked:o.bool,color:o.string.isRequired,defaultChecked:o.bool,disabled:o.bool,onChange:o.func,size:o.string},getDefaultProps:function(){return {checked:undefined,defaultChecked:false,onChange:k,size:'small'};},getInitialState:function(){return {checked:this.props.checked!==undefined?this.props.checked:this.props.defaultChecked};},componentWillReceiveProps:function(q){var r=q.checked!==undefined?q.checked:this.state.checked;this.setState({checked:r});},isChecked:function(){return this.props.checked!==undefined?this.props.checked:this.state.checked;},onChange:function(q){this.toggleState();},onClick:function(q){this.toggleState();},onKeyDown:function(q){if(q.keyCode==h.SPACE){this.toggleState();q.preventDefault();}},toggleState:function(){if(!this.props.disabled){var q=!this.isChecked();this.setState({checked:q});this.props.onChange(q);}},render:function(){var q=l(this.props.className,"_1ywc _5fns"),r=i.createElement("input",i.__spread({},this.props,{type:"checkbox",checked:this.isChecked(),onChange:this.onChange})),s=null;switch(this.props.size){case 'small':s=m({name:'checkmark',shade:'white',size:'small'});break;case 'medium':s=m({name:'checkmark',shade:'white',size:'medium'});break;case 'large':s=m({name:'checkmark',shade:'white',size:'large'});break;}return (i.createElement("span",{"aria-checked":this.isChecked(),className:q,onClick:this.onClick,onKeyDown:this.onKeyDown,role:"checkbox",style:{background:this.props.color},tabIndex:"0"},r,i.createElement(g,{src:s,style:{display:this.isChecked()?'inline-block':'none'}})));}});e.exports=p;},null);
__d("InsightsLegendCheckboxKey.react",["InputLabel.react","InsightsLegendColoredCheckbox.react","React","cx","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=i,m=l.PropTypes,n=i.createClass({displayName:"InsightsLegendCheckboxKey",propTypes:{checked:m.bool,color:m.string.isRequired,disabled:m.bool,onChange:m.func,isInline:m.bool},componentWillReceiveProps:function(o){var p=o.checked!==undefined?o.checked:this.state.checked;this.setState({checked:p});},getDefaultProps:function(){return {checked:true,onChange:k,isInline:true};},getInitialState:function(){return {checked:this.props.checked};},onChange:function(o){this.setState({checked:o});this.props.onChange(o);},render:function(){var o=this.props.isInline?'inline':'block';return (i.createElement(g,{className:"_7l7",display:o},i.createElement(h,{disabled:this.props.disabled,color:this.props.color,checked:this.state.checked,size:this.props.size,onChange:this.onChange}),i.createElement("label",{className:"_7l6"},this.props.children)));}});e.exports=n;},null);
__d("ScrollLayout",["EventEmitter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(){"use strict";g.call(this);this.$ScrollLayout0=0;this.$ScrollLayout1=0;this.$ScrollLayout2=false;}j.prototype.setScrollTop=function(k){"use strict";if(k!==this.$ScrollLayout0){this.$ScrollLayout0=k;this.requestChange();}};j.prototype.getScrollTop=function(){"use strict";return this.$ScrollLayout0;};j.prototype.setScrollHeight=function(k){"use strict";if(k!==this.$ScrollLayout1){this.$ScrollLayout1=k;this.requestChange();}};j.prototype.getScrollHeight=function(){"use strict";return this.$ScrollLayout1;};j.prototype.getHeight=function(){"use strict";return this.$ScrollLayout3;};j.prototype.setHeight=function(k){"use strict";if(k!==this.$ScrollLayout3){this.$ScrollLayout3=k;this.requestChange();}};j.prototype.requestChange=function(){"use strict";if(!this.$ScrollLayout2){this.$ScrollLayout2=true;this.emit('change');this.$ScrollLayout2=false;}};e.exports=j;},null);
__d("LayoutScrollableViewDelegate.react",["React","ReactComponentWithPureRenderMixin","ResponsiveBlock.react","ScrollLayout","cx","translateDOMPositionXY"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=g,n=m.PropTypes,o=g.createClass({displayName:"LayoutScrollableViewDelegate",mixins:[h],propTypes:{layout:n.instanceOf(j).isRequired},getInitialState:function(){return {scrollTop:this.props.layout.getScrollTop()};},componentWillMount:function(){this._subscription=this.props.layout.addListener('change',this._onLayoutChange);},componentWillUnmount:function(){this._subscription.remove();this._subscription=null;},render:function(){var p={};l(p,0,-Math.max(0,this.state.scrollTop));return (g.createElement("div",{className:"_2mum",style:p},g.createElement(i,{onResize:this._onResize,className:"_2mun"}),this.props.children));},_onResize:function(p,q){this.props.layout.setScrollHeight(q);},_onLayoutChange:function(){this.setState({scrollTop:this.props.layout.getScrollTop()});}});e.exports=o;},null);
__d("LayoutScrollableView.react",["Keys","LayoutScrollableViewDelegate.react","React","ReactComponentWithPureRenderMixin","ReactWheelHandler","ScrollLayout","Scrollbar.react","clamp","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=i,q=p.PropTypes,r=i.createClass({displayName:"LayoutScrollableView",mixins:[j],propTypes:{height:q.number.isRequired,width:q.number.isRequired},getInitialState:function(){this._layout=new l();return {scrollTop:this._layout.getScrollTop(),scrollHeight:this._layout.getScrollHeight()};},componentWillMount:function(){this._layout.addListener('change',this._onLayoutChange);this._wheelHandler=new k(this._onWheel,false,true,true);},componentWillUnmount:function(){this._layout.removeAllListeners();this._layout=null;},render:function(){var s={height:this.props.height,width:this.props.width};return (i.createElement("div",{className:"_5jln",style:s},i.createElement("div",{className:"_4bn9",tabIndex:0,onWheel:this._wheelHandler.onWheel,onKeyDown:this._onKeyDown},i.createElement(h,{layout:this._layout},this.props.children)),i.createElement(m,{contentSize:this.state.scrollHeight,onScroll:this._onScroll,position:this.state.scrollTop,size:this.props.height})));},_onWheel:function(s,t){var u=n(0,this._layout.getScrollTop()+Math.round(t),Math.max(0,this.state.scrollHeight-this.props.height));this._layout.setScrollTop(u);},_onScroll:function(s){this._layout.setScrollTop(s);},_onKeyDown:function(event){switch(event.target.tagName){case 'INPUT':case 'OPTION':case 'SELECT':case 'TEXTAREA':return;}var s=event.keyCode,t;switch(s){case g.HOME:t=-this.state.scrollHeight;break;case g.UP:t=-m.KEYBOARD_SCROLL_AMOUNT;break;case g.DOWN:t=m.KEYBOARD_SCROLL_AMOUNT;break;case g.PAGE_UP:t=-this.props.height;break;case g.PAGE_DOWN:t=this.props.height;break;case g.SPACE:if(event.shiftKey){t=-this.props.height;}else t=this.props.height;break;default:return;}event.preventDefault();this._layout.setScrollTop(this._layout.getScrollTop()+t);},_onLayoutChange:function(){this.setState({scrollTop:this._layout.getScrollTop(),scrollHeight:this._layout.getScrollHeight()});}});e.exports=r;},null);
__d("InsightsLegendScrollableVert.react",["InsightsLegend.react","LayoutScrollableView.react","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=i,k=j.PropTypes,l=i.createClass({displayName:"InsightsLegendScrollableVert",propTypes:{height:k.number.isRequired,width:k.number.isRequired},render:function(){return (i.createElement(h,{height:this.props.height,width:this.props.width},i.createElement(g,{className:this.props.className,layout:g.layout.STACKED},this.props.children)));}});e.exports=l;},null);
__d("DevsiteButtonTextField.react",["AsyncRequest","React","URI","XUIButton.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=h,n=m.PropTypes,o=h.createClass({displayName:"DevsiteButtonTextField",propTypes:{value:n.string,buttonHidden:n.bool,buttonLabel:n.string,action:n.string,actionType:n.oneOf(['async','link'])},getInitialState:function(){return {value:this.props.value,buttonHidden:this.props.buttonHidden,buttonLabel:this.props.buttonLabel,action:this.props.action,actionType:this.props.actionType};},getDefaultProps:function(){return {buttonHidden:false,buttonLabel:l._("Show")};},_defaultClickHandler:function(event){if(this.state.action)if(this.state.actionType=='link'){i(this.state.action).go(true);}else new g(this.state.action).setMethod('POST').setHandler(function(p){var q=true;if(typeof p.payload.buttonHidden!=='undefined')q=p.payload.buttonHidden;var r=this.state.action;if(typeof p.payload.action!=='undefined')r=p.payload.action;this.setState({buttonLabel:p.payload.buttonLabel,buttonHidden:q,value:p.payload.value,action:r});}.bind(this)).send();return event.preventDefault();},render:function(){var p=this.state.value,q=null;if(!this.state.buttonHidden)q=h.createElement(j,{type:"button",label:this.state.buttonLabel,onClick:this.props.onClick||this._defaultClickHandler});return (h.createElement("div",{className:"_5e_6 _5rvc"},h.createElement("span",{className:"_5rv9"},p),q));}});e.exports=o;},null);
__d("BonsaiAdCreateButton",["InsightsContext","React","cx","fbt","XUIButton.react"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=h,m=l.PropTypes,n=h.createClass({displayName:"BonsaiAdCreateButton",propTypes:{text:m.oneOf(['app','installs','engagement']).isRequired,link:m.string},render:function(){return ((g.hasIOS()||g.hasAndroid())?h.createElement(k,{className:"_3jql",href:this.props.link?this.props.link:g.getAdInstallLink(),label:this.text[this.props.text],size:"medium",target:"_blank"}):null);},text:{app:j._("Promote Your App"),installs:j._("Promote Installs"),engagement:j._("Promote Engagement")}});e.exports=n;},null);
__d("BonsaiApiBreakdown",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={NONE:'none',ACQUISITION_SOURCE:'acquisition_source',ACQUISITION_SOURCE_L1:'acquisition_source_l1',ACQUISITION_SOURCE_L2:'acquisition_source_l2',ACQUISITION_SOURCE_L3:'acquisition_source_l3',AGE:'age',API_METHOD:'api_method',APP_NAME:'app_name',APP_VERSION:'app_version',AUTH_STATE:'auth_state',AVG_SPEND_PER_USER:'avg_spend_per_user',CITY:'city',CLICKS:'clicks',CLIENT:'client',LABEL_COHORT:'label_cohort',COUNTRY:'country',CPI:'cpi',PUBLISHING_ACTOR_TYPE:'publishing_actor_type',APP_EVENT_PARAMETER1:'app_event_parameter1',APP_EVENT_PARAMETER2:'app_event_parameter2',APP_EVENT_PARAMETER3:'app_event_parameter3',APP_EVENT_PARAMETER4:'app_event_parameter4',APP_EVENT_PARAMETER5:'app_event_parameter5',APP_EVENT_PARAMETER6:'app_event_parameter6',APP_EVENT_PARAMETER7:'app_event_parameter7',APP_EVENT_PARAMETER8:'app_event_parameter8',APP_EVENT_PARAMETER9:'app_event_parameter9',APP_EVENT_PARAMETER10:'app_event_parameter10',APP_EVENT_PARAMETER11:'app_event_parameter11',APP_EVENT_PARAMETER12:'app_event_parameter12',APP_EVENT_PARAMETER13:'app_event_parameter13',APP_EVENT_PARAMETER14:'app_event_parameter14',APP_EVENT_PARAMETER15:'app_event_parameter15',APP_EVENT_PARAMETER16:'app_event_parameter16',APP_EVENT_PARAMETER17:'app_event_parameter17',APP_EVENT_PARAMETER18:'app_event_parameter18',APP_EVENT_PARAMETER19:'app_event_parameter19',APP_EVENT_PARAMETER20:'app_event_parameter20',APP_EVENT_PARAMETER21:'app_event_parameter21',APP_EVENT_PARAMETER22:'app_event_parameter22',APP_EVENT_PARAMETER23:'app_event_parameter23',APP_EVENT_PARAMETER24:'app_event_parameter24',APP_EVENT_PARAMETER25:'app_event_parameter25',DEVICE_MODEL:'device_model',DEVICE_OS:'device_os',ERROR_CODE:'error_code',ERROR_MSG:'error_msg',ERROR_VALUE:'error_value',GENDER:'gender',HOURLY:'hourly',IDENTITY_SOURCE:'identity_source',IMPRESSIONS:'impressions',INSTALLS:'installs',LOCALE:'locale',LOGIN_TYPE:'login_type',MEDIATYPE:'media_type',OG_ACTION_TYPE:'action_type',OG_CLK_DEST:'destination',OG_OBJECT_TYPE:'object_type',PERCENTILE:'percentile',PLACEMENT:'placement',PLACEMENT_COUNTRY:'placement_country',PURCHASE_EVENTS:'purchase_events',REACH:'reach',REALIZED_REVENUE:'realized_revenue',REF:'ref',ROAS:'roas',SHORT_VERSION_CODE:'short_version_code',SPEND:'spend',SPONSORED:'sponsored',STORY:'story',SOURCE:'source',UI_ELEMENT:'ui_element',URL:'url',USER_AGENT:'user_agent',DATA_TYPE:'data_type'};e.exports=g;},null);
__d("InsightsGraphAPI",["BonsaiConstants","cachedGraphAPI","GraphAPI"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();i.enableBatching();var j=g.GRAPH_API_VERSION;function k(fa){j=fa;}var l=null;function m(fa){l=fa;}function n(fa){fa=fa||j;return i(fa);}function o(fa){fa=fa||l;return n().object('application',fa);}function p(fa){return o().get(fa);}function q(fa){return o().edge(fa);}function r(fa,ga){return q(fa).get(ga);}function s(fa,ga){return q(fa).post(ga);}function t(fa,ga){return r('app_insights/'+fa,ga);}function u(fa){return h(o()).get(fa);}function v(fa,ga){return h(q(fa)).get(ga);}function w(fa,ga){return v('app_insights/'+fa,ga);}function x(fa,ga,ha){return h(n().object(fa,ga)).get(ha);}function y(fa,ga,ha,ia){return h(aa(fa,ga,ha)).get(ia);}function z(fa,ga,ha){return n().object(fa,ga).get(ha);}function aa(fa,ga,ha){return n().object(fa,ga).edge(ha);}function ba(fa,ga,ha,ia){return aa(fa,ga,ha).get(ia);}function ca(fa,ga,ha,ia){return aa(fa,ga,ha).post(ia);}function da(fa,ga,ha){return n().object(fa,ga).post(ha);}function ea(fa){return n().object('remove',fa).remove();}Object.assign(n,{setDefaultVersion:k,setInsightsObjectID:m,app:o,appGet:p,appEdgeGet:r,appEdgePost:s,appMetricGet:t,cachedAppGet:u,cachedAppEdgeGet:v,cachedAppMetricGet:w,cachedObjectGet:x,cachedObjectEdgeGet:y,objectGet:z,objectEdge:aa,objectEdgeGet:ba,objectEdgePost:ca,objectPost:da,objectRemove:ea});e.exports=n;},null);
__d("InsightsGraphAPIConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={COHORTS_EDGE:'app_events_cohorts',COHORTS_NODE:'app_events_cohorts',FUNNEL_EDGE:'app_events_funnels',FUNNEL_NODE:'app_events_funnel',METRIC_APP_EVENT:'app_event',MOBILE_MEASUREMENT_NODE:'mobile_measurement_object',OFFSITE_PIXEL_NODE:'offsite_pixel',SEGMENT_EDGE:'app_events_segments',SEGMENT_NODE:'app_events_segment'};e.exports=g;},null);
__d("BonsaiAppEventTypesUtils",["AppEventField","BonsaiApiBreakdown","BonsaiConstants","InsightsContext","InsightsGraphAPI","InsightsGraphAPIConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=[],n={},o=false,p=false;function q(s,t){if(s.display_name<t.display_name)return -1;if(s.display_name>t.display_name)return 1;return 0;}var r={init:function(){if(p||o)return;o=true;p=false;return k.appEdgeGet('app_event_types').then(function(s){p=true;o=false;m=s.data||[];m=m.filter(function(event){return event.event_name!=='fb_mobile_deactivate_app'&&(!event.event_name.startsWith(i.SOCIAL_PLUGIN_EVENT_PREFIX)||j.getShowSocialPluginEvents());});m.sort(q);m.forEach(function(event){event.parameters=event.parameters||[];event.parameters.sort(q);n[event.event_name]=event;});});},getAppEvents:function(){this._checkIsReady();return m;},getAppEvent:function(s){this._checkIsReady();return n[s];},getAppEventDisplayName:function(s){var event=this.getAppEvent(s);return event?event.display_name:s;},getAppEventParameters:function(s){var event=this.getAppEvent(s);return event?event.parameters:null;},getBestParameterDisplayName:function(s){var t=this.getAppEvents();for(var u=0;u<t.length;u++){var event=t[u],v=this.getAppEventParameterDisplayName(event.event_name,s);if(v!==s)return v;}return s;},getAppEventParameter:function(s,t){var u=this.getAppEventParameters(s)||[];for(var v=0;v<u.length;v++)if(u[v].parameter_name===t)return u[v];return null;},getAppEventParameterDisplayName:function(s,t){var u=this.getAppEventParameter(s,t);return u?u.display_name:t;},getAppEventParameterKnownValues:function(s,t){var u=this.getAppEventParameter(s,t),v=u?u.known_parameter_values:null;return v?v:[];},getAppEventParameterKnownDisplayValue:function(s,t,u){var v=this.getAppEventParameterKnownValues(s,t);if(!v)return u;for(var w=0;w<v.length;w++)if(v[w].parameter_value===u)return v[w].display_name;return u;},isAppEventCurrencyValue:function(s){return !!this.getAppEventParameter(s,'_valueToSumInUSD');},loadParameterValues:function(s,t,u){if(t===g.VALUE_TO_SUM||t==='_valueToSumInUSD'){u([]);return;}var v=t===g.APP_VERSION?h.APP_VERSION:t;k.cachedAppMetricGet(l.METRIC_APP_EVENT,{aggregateBy:'COUNT',breakdowns:[v],date_format:'U',event_name:s}).done(function(w){var x={},y=[];w.data.forEach(function(z){var aa=z.breakdowns[v];if(!x[aa]){x[aa]=true;y.push({title:this.getAppEventParameterKnownDisplayValue(s,t,aa),uniqueID:aa});}}.bind(this));u(y);}.bind(this));},hasAnySocialPluginEvents:function(){this._checkIsReady();return m.some(function(s){return s.event_name.startsWith(i.SOCIAL_PLUGIN_EVENT_PREFIX);});},nonSocialPluginEventCount:function(){this._checkIsReady();return m.filter(function(s){return !s.event_name.startsWith(i.SOCIAL_PLUGIN_EVENT_PREFIX);}).length;},_checkIsReady:function(){if(!p)throw 'BonsaiAppEventTypesUtils not ready';}};e.exports=r;},null);
__d("BonsaiText",["AppAcquisitionSourceCategory","BonsaiApiBreakdown","BonsaiConstants","BusinessURI.brands","InsightsContext","InsightsCountryNames","InsightsCurrencyNames","InsightsLocaleNames","Link.react","React","XAdsManagerCampaignGroupPageController","XAdsManagerCampaignPageController","DeviceDisplayNames","copyProperties","ex","fbt","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();var x={};Object.keys(s).forEach(function(z){var aa=s[z];x[aa]=x[aa]+1||1;});var y={_fastEventBreakdownBucketLookup:{},upsell:{app_events:{text:v._("We noticed you aren't using App Events. App Events show how users are engaging with your app by tracking specific behaviors like purchases, app launches, levels achieved, etc."),title:v._("App Events"),url:v._("https:\/\/developers.facebook.com\/docs\/ios\/app-events")}},implicit_purchase_events_upsell:{text:v._("Does your app include in-app purchases?"),subtext:v._("Turn on automatic logging of in-app purchase events for your app on iOS."),url:v._("https:\/\/developers.facebook.com\/docs\/app-events\/faq#auto_in_app_purchase")},enable_button:v._("Enable"),learn_button:v._("Learn More"),developer_action:v._("Take Action"),accepts:v._("Accepts"),accept_rate:v._("Accept Rate"),add_event_label:v._("Add Event Label"),ad_spend:v._("Ad Spend"),age:v._("Age"),all:v._("All"),anonymous_accepts:v._("Accepts"),anonymous_accept_rate:v._("Accept Rate"),anonymous_impressions:v._("Impressions"),anonymous_facebook_conversion_accepts:v._("Conversion Accepts"),anonymous_facebook_conversion_accept_rate:v._("Conversion Accept Rate"),anonymous_facebook_conversion_impressions:v._("Conversion Impressions"),anonymous_login:v._("Anonymous Login"),api_calls:v._("Calls"),api_errors:v._("Errors"),api_error_rate:v._("Error Rate"),api_request_time_avg:v._("Average Request Time"),api_request_time_avg_label:v._("Average Request Time (ms)"),app_invite_installs:v._("Installs"),app_mobile_opens:v._("Opens from Facebook Mobile Apps"),mobile_referral_installs:v._("Mobile Referral Installs"),app_notifications_sent:v._("App Notifications Sent"),app_total_referrals:v._("Total Referrals"),app_version:v._("App Version"),attributed_installs:v._("Attributed Installs"),avg_value:v._("Average Per Event"),blocks:v._("Users Blocking Your App"),campaign:v._("Ad Set"),category:v._("Category"),change:v._("Change"),chargebacks:v._("Payments Chargebacks"),city:v._("City"),click_demographics:v._("Click Demographics"),clicks:v._("Clicks"),click_rate:v._("Click Through Rate"),clicks_per_send:v._("Clicks Per Send"),comments:v._("Comments"),compareApps:v._("Compare to other apps"),compareGames:v._("Compare to other games"),conversion_to_facebook:v._("Conversions"),count:v._("Count"),count_pct:v._("Count \u0025"),ctr:v._("Click Through Rate"),country:v._("Country"),cpi:v._("CPI"),created:v._("Created"),date:v._("Date"),demo:v._("Demographics"),del:v._("delete"),detail_country:v._("Details by Country"),detail_date:v._("Details by Date"),dialogs:v._("Dialogs"),dialog_ctr:v._("Dialog CTR"),est_revenue:v._("Est. Rev"),event:v._("Event"),events:v._("Events"),existing_user_permissions:v._("Existing Users"),fb_app:v._("applications in Facebook"),filled:v._("Filled"),filled_requests:v._("Filled Requests"),filters:v._("INCLUDE"),gender_age:v._("Gender & Age"),geo:v._("Geography"),impressions:v._("Impressions"),imps_accepts:v._("Impressions and Accepts"),installs:v._("New Logins"),label:v._("Label"),likes:v._("Likes"),locale:v._("Language"),more_details:v._("Details"),new_users:v._("New Logins"),new_permissions:v._("Additional Permissions"),not_applicable:v._("N\/A"),otherApps:v._("Other Apps (scaled)"),otherGames:v._("Other Games (scaled)"),parameters:v._("Parameters"),payout:v._("Estimated Revenue"),percentage:v._("Percentage"),percentile_by_value:v._("By Event Value"),percentile_by_count:v._("By Event Count"),publish_permissions:v._("Publish Permissions"),publishes:v._("Stories Published"),publishers:v._("Publishers"),referrals:v._("referrals"),referral_demographics:v._("Referral Demographics"),refunds:v._("Payments Refunds"),requests:v._("Requests"),requests_sent:v._("Requests Sent"),requests_accepted:v._("Requests Accepted"),rpc:v._("RPC"),rpm:v._("RPM"),revenue:v._("Revenue"),roas:v._("ROAS"),roas_per_user:v._("ROAS per User"),sends:v._("Sends"),stop_compare:v._("Stop Compare"),spam_rate:v._("Spam Reports per 10,000 Impressions"),spend:v._("Payments Spend"),submits:v._("Submits"),summary:v._("Summary"),story_newsfeed_clicks:v._("Story Clicks"),story_creation:v._("Story Creation"),story_creation_demographics:v._("Story Creation Demographics"),story_creation_dl:v._("story_creation"),title:v._("Title"),total:v._("Total"),total_clicks:v._("Total Clicks"),total_comments:v._("Total Comments"),total_likes:v._("Total Likes"),total_new_logins:v._("Total Login Users"),total_stories:v._("Total Stories"),total_story_comments:v._("Total Story Comments"),total_story_likes:v._("Total Story Likes"),uninstalls:v._("Permission Removals"),unknown:v._("Unknown"),url:v._("URL"),users:v._("Users"),users_active:v._("Active Login Users"),users_daily:v._("Daily Active Users"),users_monthly:v._("Monthly Active Users"),users_total:v._("Total Login Users"),users_trend:v._("Trend"),users_weekly:v._("Weekly Active Users"),value:v._("Value"),v1_tooltip:v._("Go back to Insights 1.0"),your_app:v._("your application"),updateClientBreakdowns:function(){if(k.getShowCanvasEvents())y.breakdown.client.fbcanvas=v._("FB Canvas");},getBucketLabel:function(z,aa){y.updateClientBreakdowns();if(z===i.ALL)if(aa===h.CLIENT){return y.breakdown.client.all;}else if(aa===h.OG_ACTION_TYPE){return y.breakdown.action_type.all;}else return y.all;if(aa===h.REF){return z;}else if(aa===h.LABEL_COHORT){return this.getCohortName(z);}else if(aa===h.ACQUISITION_SOURCE){return this.getAcquisitionSourceName(z,0);}else if(aa===h.ACQUISITION_SOURCE_L1){return this.getAcquisitionSourceName(z,1);}else if(aa===h.ACQUISITION_SOURCE_L2){return this.getAcquisitionSourceName(z,2);}else if(aa===h.ACQUISITION_SOURCE_L3){return this.getAcquisitionSourceName(z,3);}else if(aa===h.OG_ACTION_TYPE){return this.getOGTypeName(h.OG_ACTION_TYPE,z);}else if(aa===h.OG_OBJECT_TYPE){return this.getOGTypeName(h.OG_OBJECT_TYPE,z);}else if(aa==='fb_currency'){return this.getLocalizedCurrencyName(z);}else if(aa===h.PLACEMENT){var ba=k.getAdsPlacements()[z];if(typeof(ba)==='string'&&ba.trim()!=='')return ba;return z;}var ca=y.breakdown[aa];if(ca)if(ca[z]){if(aa===h.DEVICE_MODEL&&this.getIsDuplicateDeviceName(ca[z]))return ca[z]+' ('+z+')';return ca[z];}return z;},getOGTypeName:function(z,aa){var ba=y.breakdown[z];if(ba&&ba[aa])return ba[aa];var ca=null;if(z===h.OG_ACTION_TYPE){ca=k.getOGActionTypes();}else if(z===h.OG_OBJECT_TYPE)ca=k.getOGObjectTypes();return ca&&ca[aa]?ca[aa]:aa;},getCohortName:function(z){var aa=z.split('_');if(aa[0]=='CUSTOM'&&aa.length>=2){aa.shift();var ba=aa.join();if(ba!=='')return v._("Custom: {custom_ref}",[v.param("custom_ref",ba)]);}return null;},getFacebookOrganicSource:function(z){return this.organic_fb[z];},_getAdLink:function(z,aa){if(z[aa]==='u')return v._("Unknown");var ba=null;switch(aa){case 1:ba=(q.getURIBuilder()).setInt('campaign_id',z[1]);break;case 2:case 3:ba=(r.getURIBuilder()).setInt('ad_set_id',z[2]);if(aa===3)ba.setInt('show_adgroup_id',z[3]);break;default:w(false);break;}var ca=j(ba.getURI()),da=p.createElement(o,{href:ca},z[aa]);return da;},getAcquisitionSourceName:function(z,aa){var ba=z.split('/'),ca=null;switch(ba[0]){case g.AD_NETWORK_FACEBOOK:switch(aa){case 0:ca=this.breakdown.acquisition_source.ad_fb;break;case 1:ca=v._("Facebook Ad | Campaign: {Campaign ID}",[v.param("Campaign ID",this._getAdLink(ba,1))]);break;case 2:ca=v._("Facebook Ad | Campaign: {campaign ID}; Ad Set: {ad set ID}",[v.param("campaign ID",this._getAdLink(ba,1)),v.param("ad set ID",this._getAdLink(ba,2))]);break;case 3:ca=v._("Facebook Ad | Campaign: {campaign ID}; Ad Set: {ad set ID}; Ad: {ad ID}",[v.param("campaign ID",this._getAdLink(ba,1)),v.param("ad set ID",this._getAdLink(ba,2)),v.param("ad ID",this._getAdLink(ba,3))]);break;}break;case g.ORGANIC_FACEBOOK:switch(aa){case 0:ca=this.breakdown.acquisition_source.organic_fb;break;case 1:case 2:case 3:ca=v._("Facebook Organic | {FB Organic Source}",[v.param("FB Organic Source",this.getFacebookOrganicSource(ba[1]))]);break;}break;case g.UNKNOWN:ca=this.breakdown.acquisition_source.u;break;default:ca=v._("Unknown: {unknown breakdown}",[v.param("unknown breakdown",z)]);break;}return ca;},getBreakdownName:function(z){var aa=this.breakdowns[z];if(aa)return aa;return z;},getBreakdownTooltip:function(z,aa){if(aa&&this.excludeTooltipWhenSelected[z])return (void 0);return this.breakdownTooltips[z];},breakdowns:{acquisition_source:v._("Acquisition Source"),acquisition_source_l1:v._("Acquisition Source L1"),acquisition_source_l2:v._("Acquisition Source L2"),acquisition_source_l3:v._("Acquisition Source L3"),action_type:v._("Action Type"),age:v._("Age"),age_gender:v._("Age and Gender"),api_method:v._("API Method"),app_name:v._("App Name"),app_version:v._("App Version"),auth_state:v._("Users \/ Non-users"),avg_spend_per_user:v._("Average Spend per User"),clicks:v._("Clicks"),client:v._("Platform"),label_cohort:v._("Label Cohort"),country:v._("Country"),cpi:v._("Cost per Install"),destination:v._("Click Destination"),device_model:v._("Device Model"),device_os:v._("Device OS"),gender:v._("Gender"),hourly:v._("Hourly"),identity_source:v._("Identity Source"),impressions:v._("Impressions"),installs:v._("Installs"),locale:v._("Language"),login_type:v._("Login Type"),none:v._("Overall"),object_type:v._("Object Type"),purchase_events:v._("Purchase Events"),reach:v._("Reach"),realized_revenue:v._("Realized Revenue"),ref:v._("Ref Parameter"),roas:v._("Return on Ads Spend"),short_version_code:v._("Short Version Code"),spend:v._("Spend"),sponsored:v._("Sponsored \/ Organic"),source:v._("Source"),placement:v._("Placement"),ui_element:v._("Active UI Element"),user_agent:v._("Event Logging SDK"),publishing_actor_type:v._("Publishing Source")},breakdownTooltips:{identity_source:v._("Identity Source shows people who are logged into your app with Facebook Login (Using Facebook Login), people who are logged into the Facebook App on their device (Logged Into Facebook), or people who are not logged into your app through Facebook Login and not logged into Facebook on their device (None)."),label_cohort:v._("Users who install your app are automatically bucketed into label cohorts based on acquisition source (e.g. newsfeed, app center, ad set,etc). You can also assign users to arbitrary cohorts via the Graph API."),ui_element:v._("UI Element that was active when the event was logged. For iOS this is the active modal view controller. In Android, this is the activity name."),user_agent:v._("SDK version or user agent logging the event"),acquisition_source:v._("Aquisition Source tells you which users came to your app from a Facebook Ad, Facebook organic content, another media source, or an unknown source."),acquisition_source_l1:v._("One level of hierarchy beyond the root \"acquisition source\". This varies by the specific acquisition source. E.g., for Facebook ads this will be the ad campaign."),acquisition_source_l2:v._("Two levels of hierarchy beyond the root \"acquisition source\". This varies by the specific acquisition source. E.g., for Facebook ads this will be the ad campaign and ad set."),acquisition_source_l3:v._("Three levels of hierarchy beyond the root \"acquisition source\". This varies by the specific acquisition source. E.g., for Facebook ads this will be the ad campaign, ad set, and individual ad.")},excludeTooltipWhenSelected:{user_agent:true,acquisition_source_l1:true,acquisition_source_l2:true,acquisition_source_l3:true},breakdown:{age:{'13-17':'13-17','18-24':'18-24','25-34':'25-34','35-44':'35-44','45-54':'45-54','55+':'55+','55-64':'55-64','65+':'65+',UNKNOWN:v._("Unknown")},identity_source:{0:v._("Using Facebook Login"),1:v._("Logged Into Facebook"),2:v._("None")},acquisition_source:{ad_fb:v._("Facebook Ad"),organic_fb:v._("Facebook Organic"),u:v._("Unknown")},action_type:{all:v._("All Actions"),581551515211424:'Stream Publish API',670317829668125:'Photo Upload API'},client:{all:v._("All Platforms"),android:v._("Android"),fbcanvas:v._("Canvas"),fbpixel:v._("Web"),ios:v._("iOS"),ios_unknown:v._("iOS"),mob_unknown:v._("Unknown Mobile"),mweb:v._("Mobile Web"),other:v._("Unknown"),web:v._("Web")},country:t({u:v._("Unknown")},l),destination:{1:v._("Canvas App"),2:v._("Website"),3:v._("Facebook"),4:v._("Embedded Video"),5:v._("App Store"),6:v._("Native App"),999:v._("Unknown")},device_model:s,gender:{F:v._("Women"),M:v._("Men"),U:v._("Other\/Unknown")},auth_state:{0:v._("Non-app Users"),1:v._("App Users")},locale:t({u:v._("Unknown")},n),login_type:{facebook:v._("Facebook Login"),anonymous:v._("Anonymous Login")},object_type:{},sponsored:{s:v._("Sponsored"),o:v._("Organic"),u:v._("Unknown")},publishing_actor_type:{0:v._("Posts by your Page"),1:v._("Smart Publishing Posts"),2:v._("General Clicks")},error_value:{total:v._("Total Clicks on Link"),error:v._("Error")}},organic_fb:{APPCENTER:v._("App Center"),STORIES:v._("Organic Stories"),REQUESTS:v._("Requests"),OTHER:v._("Other Organic"),FEED:v._("Newsfeed")},cumulative:{MOST_ACTIVE_5:v._("Top 5\u0025 of people who are the most active"),MOST_ACTIVE_10:v._("Top 10\u0025 of people who are the most active"),MOST_ACTIVE_25:v._("Top 25\u0025 of people who are the most active"),MOST_ACTIVE_CUSTOM:v._("Custom range of people who are most active"),MOST_VALUE_5:v._("Top 5\u0025 of people whose actions are the most valuable"),MOST_VALUE_10:v._("Top 10\u0025 of people whose actions are the most valuable"),MOST_VALUE_25:v._("Top 25\u0025 of people whose actions are the most valuable"),MOST_VALUE_CUSTOM:v._("Custom range of people whose actions are the most valuable")},errors:{unavailable:v._("No data is available."),no_data:v._("No data is available for the current selection."),no_geo_data:v._("No geographic data is available for the current selection."),empty_segment:v._("For the current date range, this segment has no people in it.")},getLocalizedCurrencyName:function(z){return m[z]||z;},getEventAndBreakdownSpecificBucketTranslation:function(z,aa,ba){var ca=this._fastEventBreakdownBucketLookup[z.name];if(!ca){ca={breakdowns:null};this._fastEventBreakdownBucketLookup[z.name]=ca;}var da=ca.breakdowns;if(da==null){da={};var ea=z.custom_event_fields||[];if(z.builtin_event_fields)ea=ea.concat(z.builtin_event_fields);ea.forEach(function(ha){var ia={};if(ha.buckets)ha.buckets.forEach(function(ja){ia[ja.name]=ja.display_name;});da[ha.name]=ia;});ca.breakdowns=da;}var fa,ga=da[ba];if(ga)fa=this.getBucketLabel(aa,ba);if(!fa)fa=aa;return fa;},getIsDuplicateDeviceName:function(z){if(x[z])return x[z]>1;return false;}};e.exports=y;},null);
__d("BonsaiApiError",["BonsaiAppEventTypesUtils","BonsaiText","InsightsContext","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(l,m){"use strict";if(!l||!l.error)l={error:{message:'Unknown Error',code:'unknown'}};this.message=l.error.message;this.code=l.error.code;this.type=l.error.type;this.subcode=l.error.error_subcode;this.$BonsaiApiError0=m;}k.prototype.isSessionExpiredError=function(){"use strict";return this.code===190&&this.subcode===463&&this.type==='OAuthException';};k.prototype.isPermissionError=function(){"use strict";return this.code===3000;};k.prototype.isInvalidQueryError=function(){"use strict";return this.code===3001;};k.prototype.isMetricOfflineError=function(){"use strict";return this.code===3002;};k.prototype.isMetricRequiresAdmin=function(){"use strict";return this.code===3003;};k.prototype.getMessage=function(){"use strict";var l=h.errors[this.code];if(this.isMetricRequiresAdmin()&&this.$BonsaiApiError0)l=j._("To view '{Event Name}' information, you need to have admin access for '{App Name}'.",[j.param("Event Name",g.getAppEventDisplayName(this.$BonsaiApiError0)),j.param("App Name",i.getObjName())]);return l||this.message;};k.prototype.subtract=function(l){"use strict";return this;};k.prototype.add=function(l){"use strict";return this;};k.prototype.getTotal=function(){"use strict";return this;};k.prototype.setValueFormatter=function(l){"use strict";return this;};k.prototype.divideBy=function(l){"use strict";return this;};k.prototype.filterBy=function(l){"use strict";return this;};k.prototype.getTimeSeries=function(l){"use strict";return this;};k.prototype.groupBy=function(l){"use strict";return this;};k.prototype.scaleTo=function(l){"use strict";return this;};k.prototype.selectBetween=function(l,m){"use strict";return this;};k.prototype.setBreakdown=function(l,m){"use strict";return this;};k.prototype.concatData=function(l){"use strict";return this;};k.prototype.getDataSize=function(){"use strict";return 0;};k.prototype.setBreakdownAsValue=function(l){"use strict";return this;};k.prototype.filterBreakdownByValue=function(l,m){"use strict";return this;};e.exports=k;},null);
__d("BonsaiColors",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={AMETHYST:'#9E83C5',ANALYTICS_BLUE:'#3A84C5',ANALYTICS_GRAY:'#9BA1AA',BLUEGRAY10:'#D3D6DB',FB_BLUE:'#3B5998',FB_BLUE80:'#637BAB',TURQUOISE:'#6BDBFD',CERULEAN:'#1BA0E3',LIMA:'#86C325',GRAY5:'#F2F2F2',GRAY10:'#E5E5E5',GRAY20:'#CCCCCC',GRAY30:'#B2B2B2',GRAY40:'#999999',GRAY50:'#888',ORANGE5:'#FBF6D7',ORANGE10:'#FFF4AD',ORANGE20:'#FFEC8E',ORANGE30:'#FFDF6C',ORANGE40:'#FDD04A',ORANGE50:'#FFC343',ORANGE60:'#FFB540',ORANGE70:'#FFAB03',ORANGE80:'#FFA148',ORANGE90:'#FF9448',GREEN5:'#F4FAF2',GREEN10:'#EAF4E6',GREEN20:'#D6EBCE',GREEN30:'#C2E1B5',GREEN40:'#B0D99D',GREEN50:'#9DD085',GREEN60:'#8DC86E',GREEN70:'#7EBF57',LEAF:'#8DC86E',LEAF10:'#F1F8EE',LEAF20:'#E4F2DD',LEAF30:'#D7EBCD',LEAF40:'#CBE6BD',LEAF50:'#BDDEAB',LEAF60:'#B2D99B',LEAF70:'#A6D38C',LEAF80:'#9BCE7C',LEAF90:'#8FC86B',OCEAN:'#4FAEC3',ORCHID:'#CE97CF',RED10:'#F9E6E6',RED20:'#EEB7B6',RED30:'#EEB7B6',RED40:'#E9A09F',RED50:'#E58988',RED60:'#E27472',RED70:'#DF605D',SKY:'#91C9DB',WHITE:'#FFFFFF',X_ACCENT_BLUE:'#5890FF',X_BASE_GREEN:'#46A800',X_BASE_RED:'#DA2929',X_LIGHT_TEXT:'#898F9C',X_MEDIUM_TEXT:'#4E5665',SPARKLINES_COLOR:'#3E85C3'};g.AREA_COLORS=g.COLUMN_COLORS=[g.FB_BLUE80,g.OCEAN,g.SKY,g.GREEN60,g.AMETHYST,g.ORCHID];g.OVERVIEW_DEMO_COLORS=[g.TURQUOISE,g.CERULEAN];g.OVERVIEW_LINE_COLORS=[g.CERULEAN,g.LIMA,g.TURQUOISE];g.LINE_COLORS=[g.FB_BLUE80,g.OCEAN,g.SKY,g.GREEN60,g.AMETHYST,g.ORCHID];g.BUTTERFLY_COLORS=[g.OCEAN,g.FB_BLUE80,g.GRAY30];g.RETENTION_COLORS=[g.ORANGE5,g.ORANGE10,g.ORANGE20,g.ORANGE30,g.ORANGE40,g.ORANGE50,g.ORANGE60,g.ORANGE70,g.ORANGE80,g.ORANGE90];e.exports=g;},null);
__d("BonsaiStyle",["SpectrumStyle","BonsaiColors"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={CAMPAIGNS_EVENTS_PAGE_LENGTH:15,CUSTOM_EVENTS_PAGE_LENGTH:15,MINICHART_HEIGHT:160,MINICHART_WIDTH:292,CHART_HEIGHT:300,CHART_WIDTH:900,DEMO_WIDTH:750,FALCOR_WIDTH:740,BREAKDOWN_WIDTH:750,BREAKDOWN_DEMO_WIDTH:600,TABLE_TOP_ROWS:10,TABLE_TOP_ROWS_ONE_WEEK:7,SPARKLINES_WIDTH:60,SPARKLINES_HEIGHT:40,TIME_SELECTOR_HEIGHT:65,TIME_SELECTOR_WIDTH:760,COLORS:h,API_EXAMPLE_DIALOG_WIDTH:600,CHART_THEME:{lines:{colors:h.LINE_COLORS},areas:{colors:h.AREA_COLORS},columns:{colors:h.COLUMN_COLORS}},OVERVIEW_CHART_THEME:{columns:{colors:h.OVERVIEW_DEMO_COLORS,borderRadius:0,labelColors:[h.ANALYTICS_GRAY],sideBySideMargin:0},xAxis:{labelColor:h.ANALYTICS_GRAY,fontSize:g.FONT_SIZE_SMALL}},DEMO_COLORS:{female:h.BUTTERFLY_COLORS[0],male:h.BUTTERFLY_COLORS[1],other:h.BUTTERFLY_COLORS[2]},TREND_CHART_THEME:{areas:{colors:[g.PINK,g.LIGHT_BLUE]},lines:{colors:[g.DARK_BLUE]}}};e.exports=i;},null);
__d("BonsaiApiMethod",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=(function(){var h=function(j){var k={"app.invalidatessoproxysessions":true,"auth.androidauthorizeapp":true,"auth.expireappsessionforssoproxy":true,"auth.expiresession":true,"auth.extendssoaccesstoken":true,"auth.iosauthorizeapp":true,"permissions.getandroiddescription":true,unknown:true};if(k[j])return true;return false;},i=function(j){if(h(j))return null;return j;};return {getBonsaiApiMethod:i};})();e.exports=g;},null);
__d("BonsaiApiPromise",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(){"use strict";}g.prototype.setValueFormatter=function(h){"use strict";return this;};g.prototype.subtract=function(h){"use strict";return this;};g.prototype.add=function(h){"use strict";return this;};g.prototype.divideBy=function(h){"use strict";return this;};g.prototype.filterBy=function(h){"use strict";return this;};g.prototype.getTotal=function(){"use strict";return this;};g.prototype.filterZeroValues=function(h){"use strict";return this;};g.prototype.filterSingleDataPointsForBreakdown=function(h){"use strict";return this;};g.prototype.getTimeSeries=function(h){"use strict";return this;};g.prototype.groupBy=function(h){"use strict";return this;};g.prototype.scaleTo=function(h){"use strict";return this;};g.prototype.selectBetween=function(h,i){"use strict";return this;};g.prototype.setBreakdown=function(h,i){"use strict";return this;};g.prototype.concatData=function(h){"use strict";return this;};g.prototype.getDataSize=function(){"use strict";return 0;};g.prototype.setBreakdownAsValue=function(h){"use strict";return this;};g.prototype.filterBreakdownByValue=function(h,i){"use strict";return this;};e.exports=g;},null);
__d("BonsaiClient",["AppEventClientFilter","InsightsContext","keyMirror"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=(function(){var k={};Object.keys(g).map(function(n){k[n]=null;});k=i(k);var l=function(n){var o={};Object.keys(g).map(function(p){g[p].map(function(q){o[q]=p;});});if(!h.getShowCanvasEvents())k.fbcanvas='other';o.fbcanvas=k.fbcanvas;return o[n];},m=function(n){var o=l(n);return o||k.other;};return {getBonsaiClient:m,client:k};})();e.exports=j;},null);
__d("BonsaiApiDataAdapter",["BonsaiApiBreakdown","BonsaiApiMethod","BonsaiApiPromise","BonsaiApiError","BonsaiClient","InsightsUtils","URI","d3/time/day","d3/core/max","d3/core/min","copyProperties","invariant","mapObject","sumOfArray"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u='preEpoch',v='postEpoch';function w(x,y){"use strict";this.$BonsaiApiDataAdapter0=null;this.$BonsaiApiDataAdapter1=null;this.$BonsaiApiDataAdapter2=null;this.$BonsaiApiDataAdapter3=null;this.$BonsaiApiDataAdapter4=null;this.$BonsaiApiDataAdapter5=null;this.$BonsaiApiDataAdapter6=x.summary;if(x.data&&Array.isArray(x.data)){this.$BonsaiApiDataAdapter7=x.data;}else this.$BonsaiApiDataAdapter7=[];if(x.denom_data)this.$BonsaiApiDataAdapter8=x.denom_data;if(x.ecosystem_data)this.$BonsaiApiDataAdapter9=x.ecosystem_data;this.formatValue=y?y.formatValue:function(z){return parseFloat(z,10);};this.$BonsaiApiDataAdaptera=y?y.$BonsaiApiDataAdaptera:function(z){return l.pacificSecondsToUTCDate(z);};this.$BonsaiApiDataAdapterb=y?y.$BonsaiApiDataAdapterb:function(z){return l.utcDateToPacificSeconds(z);};this.$BonsaiApiDataAdapterc=y?y.$BonsaiApiDataAdapterc:function(z){return l.pacificTimeToUTCDay(new Date(z*1000));};this.$BonsaiApiDataAdapterd=y?y.$BonsaiApiDataAdapterd:function(z){return l.utcTimeToPacificDay(z)/1000;};this.$BonsaiApiDataAdaptere=y?y.$BonsaiApiDataAdaptere:null;this.$BonsaiApiDataAdapterf=null;this.$BonsaiApiDataAdapterg=null;}w.prototype.getTime=function(x){"use strict";return x.time||x.install;};w.prototype.setApiParams=function(x,y,z){"use strict";this.$BonsaiApiDataAdaptere={app_id:x,key:y,params:z};};w.prototype.getApiParams=function(){"use strict";return this.$BonsaiApiDataAdaptere;};w.prototype.getApiURI=function(){"use strict";if(!this.$BonsaiApiDataAdaptere)return null;var x=m().setSubdomain('graph').setPath('/'+this.$BonsaiApiDataAdaptere.app_id+'/'+'app_insights'+'/'+this.$BonsaiApiDataAdaptere.key);x.setQueryData(this.$BonsaiApiDataAdaptere.params);return x;};w.prototype.setEcosystemData=function(x){"use strict";this.$BonsaiApiDataAdapter9=x;return this;};w.prototype.getEcosystemData=function(){"use strict";return this.$BonsaiApiDataAdapter9;};w.prototype.getMessages=function(){"use strict";if(this.$BonsaiApiDataAdapter6&&this.$BonsaiApiDataAdapter6.messages){return this.$BonsaiApiDataAdapter6.messages;}else return [];};w.prototype.groupBy=function(){"use strict";var x=Array.prototype.slice.call(arguments);if(x.length===0)return this;var y=x[0];if(y===g.NONE)return this;if(!this.hasBreakdown(y)&&this.$BonsaiApiDataAdapter7.length)return {};var z={};for(var aa=this.$BonsaiApiDataAdapter7.length;--aa>=0;){var ba=this.$BonsaiApiDataAdapter7[aa],ca=this.$BonsaiApiDataAdapterh(y,ba.breakdowns[y]);if(ca){z[ca]=z[ca]||[];z[ca].push(ba);}}var da={};if(this.$BonsaiApiDataAdapter8)da=this.$BonsaiApiDataAdapter8.groupBy(y);var ea={};if(this.$BonsaiApiDataAdapter9 instanceof w)ea=this.$BonsaiApiDataAdapter9.groupBy(y);var fa={};Object.keys(z).forEach(function(ga){fa[ga]=this.groupBy.apply(new w({data:z[ga],denom_data:da[ga],ecosystem_data:ea[ga],summary:this.$BonsaiApiDataAdapter6},this),x.slice(1));},this);return fa;};w.prototype.filterBy=function(x,y,z){"use strict";if(!this.hasBreakdown(x)&&this.$BonsaiApiDataAdapter7.length)return new w({data:[]},this);var aa=[];this.$BonsaiApiDataAdapter7.forEach(function(da){var ea=da.breakdowns[x];if(y==='='){if(z.indexOf(ea)!==-1)aa.push(da);}else if(y==='!=')if(z.indexOf(ea)===-1)aa.push(da);});var ba=null;if(this.$BonsaiApiDataAdapter8)ba=this.$BonsaiApiDataAdapter8.filterBy(x,y,z);var ca=null;if(this.$BonsaiApiDataAdapter9)ca=this.$BonsaiApiDataAdapter9.filterBy(x,y,z);return new w({data:aa,denom_data:ba,ecosystem_data:ca,summary:this.$BonsaiApiDataAdapter6},this);};w.prototype.filterZeroValues=function(x){"use strict";if(x===(void 0))x='0';var y=[];this.$BonsaiApiDataAdapter7.forEach(function(z){if(z.value!==x)y.push(z);});return new w({data:y},this);};w.prototype.filterSingleDataPointsForBreakdown=function(x){"use strict";var y=this.groupBy(x),z=[];Object.keys(y).forEach(function(aa){if(y[aa].getData().length>1)z.push(aa);});return this.filterBy(x,'=',z);};w.prototype.getLatest=function(){"use strict";var x=this.getDateRange();return this.selectBetween(x.until,this.getLatestFullDataDate());};w.prototype.getOldest=function(){"use strict";var x=this.getDateRange();return this.selectBetween(x.since,x.since);};w.prototype.getDateRange=function(){"use strict";if(!this.$BonsaiApiDataAdapter7.length)return {since:new Date(0),until:new Date(0)};var x=this.getTime(this.$BonsaiApiDataAdapter7[0]),y=this.getTime(this.$BonsaiApiDataAdapter7[0]);for(var z=this.$BonsaiApiDataAdapter7.length;--z>=0;){var aa=this.getTime(this.$BonsaiApiDataAdapter7[z]);if(aa>x){x=aa;}else if(aa<y)y=aa;}return {until:this.$BonsaiApiDataAdapterc(x),since:this.$BonsaiApiDataAdapterc(y)};};w.prototype.getLatestFullDataDate=function(){"use strict";var x=this.getDateRange(),y=x.until;if(n.utc.offset(new Date(),-1)<y)y=n.utc.offset(y,-1);return y;};w.prototype.selectBetween=function(x,y){"use strict";var z=[],aa=this.$BonsaiApiDataAdapterd(x),ba=this.$BonsaiApiDataAdapterd(y);this.$BonsaiApiDataAdapter7.forEach(function(ea){if(this.getTime(ea)<=ba&&this.getTime(ea)>=aa)z.push(ea);},this);var ca=null;if(this.$BonsaiApiDataAdapter8)ca=this.$BonsaiApiDataAdapter8.selectBetween(x,y);var da=null;if(this.$BonsaiApiDataAdapter9)da=this.$BonsaiApiDataAdapter9.selectBetween(x,y);return new w({data:z,denom_data:ca,ecosystem_data:da,summary:this.$BonsaiApiDataAdapter6},this);};w.prototype.scaleTo=function(x){"use strict";x=x||1;var y=t(this.$BonsaiApiDataAdapter7.map(function(z){return parseFloat(z.value);}));return new w({data:this.$BonsaiApiDataAdapter7.slice(0).map(function(z){var aa,ba;aa={};for(ba in z)if(z.hasOwnProperty(ba))aa[ba]=z[ba];aa.value=parseFloat(aa.value)*(x/y);return aa;}),summary:this.$BonsaiApiDataAdapter6},this);};w.prototype.getTimeSeries=function(x,y){"use strict";y=y===(void 0)||y;r(typeof y==='boolean');if(!this.$BonsaiApiDataAdapter7.length)return [];if(x)return this.selectBetween(x.since,x.until).getTimeSeries();if(this.$BonsaiApiDataAdapter0!==null)return this.$BonsaiApiDataAdapter0;var z={};for(var aa=this.$BonsaiApiDataAdapter7.length;--aa>=0;){var ba=this.$BonsaiApiDataAdapter7[aa],ca=this.getTime(ba);if(z[ca]===(void 0))z[ca]=null;if(ba.value!==(void 0)){z[ca]=z[ca]||0;z[ca]+=this.formatValue(ba.value);}}var da=Object.keys(z).sort();if(this.$BonsaiApiDataAdapter8){var ea=this.$BonsaiApiDataAdapter8.getRawData(),fa={};for(aa=ea.length;--aa>=0;){ba=ea[aa];ca=this.getTime(ba);if(fa[ca]===(void 0))fa[ca]=null;if(ba.value!==(void 0)){fa[ca]=fa[ca]||0;fa[ca]+=this.$BonsaiApiDataAdapter8.formatValue(ba.value);}}da.forEach(function(ga){if(fa[ga]&&(fa[ga]>0)){z[ga]=z[ga]/fa[ga];}else z[ga]=null;});}this.$BonsaiApiDataAdapter0=[];if(y){da.forEach(function(ga){this.$BonsaiApiDataAdapter0.push([this.$BonsaiApiDataAdapterc(ga),z[ga]]);}.bind(this));}else da.forEach(function(ga){this.$BonsaiApiDataAdapter0.push([this.$BonsaiApiDataAdaptera(ga),z[ga]]);}.bind(this));return this.$BonsaiApiDataAdapter0;};w.prototype.getTrendingTimeSeries=function(x,y){"use strict";var z=x||1,aa=this.getTimeSeries(y),ba=1e-05,ca=ba;return aa.map(function(da,ea){if(ea===0)ca=da[1]+ba;return [da[0],Math.floor((da[1]+ba)*z/ca)];});};w.prototype.getNormalizeTimeSeries=function(x,y,z){"use strict";var aa=this.getTimeSeries(z),ba=o(aa,function(ga){return ga[1];}),ca=p(aa,function(ga){return ga[1];}),da=x||0,ea=y||1,fa=(ea-da)/(ba-ca);return aa.map(function(ga){if(ga[1]===null)return ga;return [ga[0],(ga[1]-ca)*fa+da];});};w.prototype.getValues=function(x){"use strict";var y=this.getTimeSeries(x);this.$BonsaiApiDataAdapteri=y.map(function(z){return z[1];});return this.$BonsaiApiDataAdapteri;};w.prototype.getTimes=function(x){"use strict";var y=this.getTimeSeries(x);this.$BonsaiApiDataAdapterj=y.map(function(z){return z[0];});return this.$BonsaiApiDataAdapterj;};w.prototype.getSummary=function(){"use strict";return this.$BonsaiApiDataAdapter6;};w.prototype.getData=function(){"use strict";return this.$BonsaiApiDataAdapter7.map(function(x){if(x.install){return {install:this.$BonsaiApiDataAdapterc(this.getTime(x)),value:this.formatValue(x.value),days_after:x.days_after,sponsored:x.sponsored};}else return {time:this.$BonsaiApiDataAdapterc(this.getTime(x)),value:this.formatValue(x.value),breakdowns:x.breakdowns};},this);};w.prototype.getRawData=function(){"use strict";return this.$BonsaiApiDataAdapter7;};w.prototype.getTotal=function(x){"use strict";return this.$BonsaiApiDataAdapterk(null,x);};w.prototype.getPreEpochTotal=function(){"use strict";return this.$BonsaiApiDataAdapterk(u);};w.prototype.getPostEpochTotal=function(){"use strict";return this.$BonsaiApiDataAdapterk(v);};w.prototype.$BonsaiApiDataAdapterk=function(x,y){"use strict";if(!y){if(!x&&this.$BonsaiApiDataAdapter1!=null)return this.$BonsaiApiDataAdapter1;if(x==u&&this.$BonsaiApiDataAdapter2!=null)return this.$BonsaiApiDataAdapter2;if(x==v&&this.$BonsaiApiDataAdapter3!=null)return this.$BonsaiApiDataAdapter3;}var z=l.pacificSecondsToUTCDate(1396310400),aa=l.pacificSecondsToUTCDate(1396483200),ba=0;if(this.$BonsaiApiDataAdapter8){var ca=(new w({data:this.$BonsaiApiDataAdapter7})).getTimeSeries(y),da=(new w({data:this.$BonsaiApiDataAdapter8.getRawData()})).getTimeSeries(y),ea=0,fa=0;Object.keys(ca).forEach(function(ga){var ha=ca[ga][0];if((x==u&&ha>z)||(x==v&&ha<aa))return;if(da[ga]){ea+=ca[ga][1];fa+=da[ga][1];}});if(fa>0){ba=ea/fa;}else ba=0;}else if(!y){this.getRawData().forEach(function(ga){ba+=this.formatValue(ga.value);}.bind(this),this);}else ba=t(this.getValues(y));if(!y)if(x==u){this.$BonsaiApiDataAdapter2=ba;}else if(x==v){this.$BonsaiApiDataAdapter3=ba;}else this.$BonsaiApiDataAdapter1=ba;return ba;};w.prototype.getLatestTotal=function(){"use strict";if(this.$BonsaiApiDataAdapter4!==null)return this.$BonsaiApiDataAdapter4;this.$BonsaiApiDataAdapter4=this.getSingleTotal(this.getLatestFullDataDate());return this.$BonsaiApiDataAdapter4;};w.prototype.getOldestTotal=function(){"use strict";if(this.$BonsaiApiDataAdapter5!==null)return this.$BonsaiApiDataAdapter5;var x=this.getDateRange();this.$BonsaiApiDataAdapter5=this.getSingleTotal(x.since);return this.$BonsaiApiDataAdapter5;};w.prototype.getSingleTotal=function(x){"use strict";var y=this.selectBetween(x,x).getTimeSeries();return y[0]?y[0][1]:0;};w.prototype.hasBreakdown=function(x){"use strict";return !!this.getBreakdowns()[x];};w.prototype.getBreakdowns=function(){"use strict";if(!this.$BonsaiApiDataAdapterg){this.$BonsaiApiDataAdapterg={};if(this.$BonsaiApiDataAdapter7.length>0){this.$BonsaiApiDataAdapterf=this.$BonsaiApiDataAdapterc(this.$BonsaiApiDataAdapter7[0].time);var x=this.$BonsaiApiDataAdapter7[0].breakdowns;if(x){this.$BonsaiApiDataAdapter7.forEach(function(y){if(y.breakdowns)Object.keys(y.breakdowns).forEach(function(z){if(!this.$BonsaiApiDataAdapterg[z])this.$BonsaiApiDataAdapterg[z]={};var aa=y.breakdowns[z];if(!this.$BonsaiApiDataAdapterg[z][aa])this.$BonsaiApiDataAdapterg[z][aa]=true;},this);},this);Object.keys(this.$BonsaiApiDataAdapterg).forEach(function(y){this.$BonsaiApiDataAdapterg[y]=Object.keys(this.$BonsaiApiDataAdapterg[y]);}.bind(this),this);}}}return this.$BonsaiApiDataAdapterg;};w.prototype.setValueFormatter=function(x){"use strict";if(typeof x!=='function')return this;this.formatValue=x;return this;};w.prototype.setHourlyFormatter=function(x){"use strict";if(typeof x!=='function')return this;this.$BonsaiApiDataAdaptera=x;return this;};w.prototype.setDateFormatter=function(x){"use strict";if(typeof x!=='function')return this;this.$BonsaiApiDataAdapterc=x;return this;};w.prototype.$BonsaiApiDataAdapterh=function(x,y){"use strict";switch(x){case g.CLIENT:return k.getBonsaiClient(y);case g.API_METHOD:return h.getBonsaiApiMethod(y);default:return y;}};w.prototype.divideBy=function(x){"use strict";if(x instanceof i||x instanceof j)return x;var y=new w({data:this.$BonsaiApiDataAdapter7,denom_data:x,summary:this.$BonsaiApiDataAdapter6},this);if(this.$BonsaiApiDataAdapter9)if(x.$BonsaiApiDataAdapter9)y.setEcosystemData(this.$BonsaiApiDataAdapter9.divideBy(x.$BonsaiApiDataAdapter9));return y;};w.prototype.getDenomData=function(){"use strict";return this.$BonsaiApiDataAdapter8;};w.mergeAsBreakdown=function(x,y){"use strict";var z=Object.keys(y);if(!z.every(function(ca){return !!y[ca];}))throw Error('data to merge must not be falsy value');if(!z.every(function(ca){return !(y[ca] instanceof j);}))return new j();if(!z.every(function(ca){return !(y[ca] instanceof i);}))return new i();if(!z.every(function(ca){return !(y[ca].getDenomData());}))throw Error('data with denom are not mergeable.');var aa=[];z.forEach(function(ca){aa=aa.concat(y[ca].getRawData().map(function(da){var ea=q({},da.breakdowns);ea[x]=ca;var fa=q({},da);fa.breakdowns=ea;return fa;}));});var ba={data:aa};if(z.every(function(ca){return y[ca].getEcosystemData();}))ba.ecosystem_data=w.mergeAsBreakdown(x,s(y,function(ca){return ca.getEcosystemData();}));return new w(ba);};w.prototype.add=function(x){"use strict";return this.$BonsaiApiDataAdapterl(x,function(y,z){return y+z;});};w.prototype.subtract=function(x){"use strict";return this.$BonsaiApiDataAdapterl(x,function(y,z){return y-z;});};w.prototype.$BonsaiApiDataAdapterl=function(x,y){"use strict";if(x instanceof i||x instanceof j)return x;if(!this.compareArrays(Object.keys(this.getBreakdowns()),Object.keys(x.getBreakdowns())))throw Error('trying to compose two adapters with different breakdowns');if(this.getDenomData()||x.getDenomData())throw Error('denom data source cannot compose with another');var z=Object.keys(this.getBreakdowns()),aa=function(fa){return z.map(function(ga){return ga+':'+fa[ga];}).join('::');},ba=this,ca=function(fa){return 'time:'+ba.getTime(fa)+'::'+aa(fa.breakdowns);},da={};this.getRawData().forEach(function(fa){da[ca(fa)]={time:this.getTime(fa),value:this.formatValue(fa.value),breakdowns:fa.breakdowns};},this);x.getRawData().forEach(function(fa){var ga=ca(fa),ha=da[ga];if(ha){ha.value=y(ha.value,x.formatValue(fa.value));}else da[ga]={time:ba.getTime(fa),value:x.formatValue(fa.value),breakdowns:fa.breakdowns};});var ea={data:Object.keys(da).map(function(fa){return da[fa];})};if(this.$BonsaiApiDataAdapter9&&x.getEcosystemData())ea.ecosystem_data=this.$BonsaiApiDataAdapter9.add(x.getEcosystemData());return new w(ea);};w.prototype.compareArrays=function(x,y){"use strict";if(x.length!=y.length)return false;x.sort();y.sort();for(var z=0;z<x.length;z++)if(x[z]!=y[z])return false;return true;};w.prototype.setBreakdown=function(x,y){"use strict";var z=this,aa={};this.getRawData().forEach(function(ba){var ca=z.getTime(ba);if(aa[ca]){aa[ca].value+=z.formatValue(ba.value);}else{var da={};da[x]=y;aa[ca]={time:ca,value:z.formatValue(ba.value),breakdowns:da};}});return new w({data:Object.keys(aa).map(function(ba){return aa[ba];})});};w.prototype.concatData=function(x){"use strict";if(x instanceof i||x instanceof j)return x;return new w({data:this.getRawData().concat(x.getRawData())});};w.prototype.getTotalError=function(){"use strict";var x=0;this.getRawData().forEach(function(y){x+=this.formatValue(y.breakdowns.error_value);}.bind(this));return x;};w.prototype.getDataSize=function(){"use strict";return this.$BonsaiApiDataAdapter7.length;};w.prototype.setBreakdownAsValue=function(x){"use strict";var y=this,z=[];this.getRawData().forEach(function(aa){z.push({time:y.getTime(aa),value:y.formatValue(aa.breakdowns[x]),breakdowns:aa.breakdowns});});return new w({data:z});};w.prototype.filterBreakdownByValue=function(x,y){"use strict";var z=[];this.getRawData().forEach(function(aa){if(aa.breakdowns[x]+""!==y+"")z.push(aa);});return new w({data:z});};e.exports=w;},null);
__d("BonsaiApiExamplesDialog",["BonsaiConfig","InsightsCodeSnippet","React","SimpleXUIDialog","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=i.createClass({displayName:"BonsaiApiExamplesDialog",_content:function(){var n=this.props.apiURIs.map(function(o){var p=o.getPath().split('/').pop();return (i.createElement("li",null,i.createElement("span",{className:"_50f4 pbs"},p),":",i.createElement(h,{code:o.toString()})));});return (i.createElement("div",{className:"_53iv"},i.createElement("div",{className:"mbs _50f4 _50f7"},l._("Examples of API used in this chart")),i.createElement("div",null,i.createElement("ul",null,n)),i.createElement("div",{className:"mbs mtm _50f3"},l._("The parameter 'access_token' should be appended to request query string with proper value in order to fetch data. This requires to grant 'read_insights' in extended permissions to the application which will be used to make the api call. See Insights API documentation and try {Graph API Explorer}.",[l.param("Graph API Explorer",i.createElement("a",{href:g.devToolExplorerURI},"Graph API Explorer"))]))));},showDialog:function(){j.show(this._content());},render:function(){return (i.createElement("span",{onClick:this.showDialog},l._("API Examples")));}});e.exports=m;},null);
__d("BonsaiApiPeriod",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={HOURLY:'hourly',DAILY:'daily',RANGE:'range'};e.exports=g;},null);
__d("BonsaiCopyLinkDialog",["InsightsCodeSnippet","React","SimpleXUIDialog","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=h,l=k.PropTypes,m=h.createClass({displayName:"BonsaiCopyLinkDialog",propTypes:{link:l.object.isRequired},_content:function(){return (h.createElement("div",null,h.createElement("div",{className:"fsl fwb mtm"},j._("Share Chart with this URL")),h.createElement("div",{className:"ptm"},h.createElement(g,{code:this.props.link.toString()}))));},showDialog:function(){i.show(this._content());},render:function(){return (h.createElement("span",{onClick:this.showDialog},j._("Get Chart Link")));}});e.exports=m;},null);
__d("BonsaiChartLinkMixin",["BonsaiCopyLinkDialog","InsightsContext","React","URI"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=i,l=k.PropTypes,m={propTypes:{currentCard:h.isDevsite()?l.string:l.string.isRequired},_getChartLink:function(){var n,o,p;n=this.props.currentCard;o={section:h.getActiveSectionName(),card:n,tab:h.getCardState(n).tab,breakdown:h.getCardState(n).breakdown,event_name:h.getActiveCustomEventName(),filters:h.getCardState(n).filters};if(h.getShowCompetitiveAnalysis())o.competitor_id=h.getActiveCompetitorId();p=j().addQueryData(o);return i.createElement(g,{link:p});}};e.exports=m;},null);
__d("BonsaiDataDownloader",["React","BlobFactory","InsightsInfoTip.react","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g.createClass({displayName:"BonsaiDataDownloader",componentWillUnmount:function(){var l=this._downloadLink;if(l){var m=a.URL||a.webkitURL,n=l.href;if(n)m.revokeObjectURL(n);}},_onClick:function(l){var m=h.getBlob(this.props.data,{type:this.props.type});if(window.navigator.msSaveBlob){window.navigator.msSaveBlob(m,this.props.filename);}else{var n=a.URL||a.webkitURL;if(!this._downloadLink){this._downloadLink=document.createElement('a');document.body.appendChild(this._downloadLink);}this._downloadLink.href=n.createObjectURL(m);this._downloadLink.download=this.props.filename;this._downloadLink.click();}},render:function(){var l=a.URL||a.webkitURL,m=window.navigator&&window.navigator.msSaveBlob;if(!h.isSupported()||!((l&&l.createObjectURL)||m)){var n=j._("This browswer is not supported. Please switch the latest version of Chrome, Firefox or Internet Explorer.");return (g.createElement(i,{tip:n},g.createElement("span",{style:{color:"grey"}},this.props.children)));}return (g.createElement("div",{onClick:this._onClick,width:"100%"},this.props.children));}});e.exports=k;},null);
__d("BonsaiDownloadMixin",["BonsaiDataDownloader","React","fbt","formatDate"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={_getExportLink:function(l,m){var n,o,p,q,r,s,t;n=(l.data===(void 0))?this._getExportData(l):l;o=[n.data];p=n.times.reduce(function(u,v){u.max=v>u.max?v:u.max;u.min=v<u.min?v:u.min;return u;},{max:Number.MIN_VALUE,min:Number.MAX_VALUE});q=[p.min/1000,p.max/1000].map(function(u){return j(u,'jMY',{utc:true,skipPatternLocalization:true});}).join('_');r=[m,q].join('+')+'.csv';s='text/csv';t=i._("Export");return (h.createElement(g,{data:o,type:s,filename:r},t));},_getExportData:function(l){var m,n,o,p;m=[];n={};o=[];l.forEach(function(q){var r={};m.push(q.header);q.body.forEach(function(s){var t=s.time.getTime();n[t]=1;r[t]=r[t]?r[t]+s.value:s.value;});o.push(r);});n=Object.keys(n).sort();o=n.map(function(q){var r,s;r=o.map(function(u){return u[q];});s=new Date();s.setTime(q);r.unshift(j(s,'m/d/Y',{utc:true}));return r;});p=m.slice(0);p.unshift('Date');o.unshift(p);o=this._createCSVString(o);return {data:o,times:n};},_createCSVString:function(l){return l.map(function(m){return m.map(function(n){return n?n.toString():'-';}).map(function(n){return n.indexOf(',')===-1?n:"\""+n+"\"";}).join(',');}).join('\n');}};e.exports=k;},null);
__d("BonsaiDevsiteStyle",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={CHART_WIDTH:700,BREAKDOWN_WIDTH:550,TIME_SELECTOR_WIDTH:560};e.exports=g;},null);
__d("BonsaiErrorNotice",["BonsaiText","React","XUINotice.react"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=h.createClass({displayName:"BonsaiErrorNotice",render:function(){var k=this.props.short?g.errors.unavailable:this.props.message;return (h.createElement(i,h.__spread({},this.props),k));}});e.exports=j;},null);
__d("BonsaiLayerModalMixin",["React","LayerPageContent.react","LayerPage.react","ReactLayeredComponentMixin","XUICloseButton.react","copyProperties","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=l({},j,{getInitialState:function(){return {showModal:false};},onToggleModal:function(o){if(!o&&this.state.showModal)this.setState({showModal:false});},onCloseButtonClick:function(){this.onToggleModal(false);},renderLayers:function(){if(!this.state.showModal)return null;if(this._renderLayersHook)return this._renderLayersHook();var o=this.getModalObject();return {modal:g.createElement(i,{layerRootClass:"_5ue4",onToggle:this.onToggleModal,shown:true},g.createElement(h,{useCustomPadding:true},g.createElement("div",{className:"_5ue5"},g.createElement(k,{className:"_5ue6",onClick:this.onCloseButtonClick}),o.title),o.content))};}});e.exports=n;},null);
__d("BonsaiDropdownButton",["ix","React","Image.react","XUIButton.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=h.createClass({displayName:"BonsaiDropdownButton",render:function(){return (h.createElement(j,h.__spread({},this.props,{image:h.createElement(i,{src:g('/images/ui/x/image/gear.png')}),imageRight:h.createElement(i,{src:g('/images/ui/x/button/normal/chevron.png')}),label:' ',use:"default"})));}});e.exports=k;},null);
__d("BonsaiPopoverMenu",["BonsaiDropdownButton","PopoverMenu.react","React","cloneWithProps","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=i,n=m.PropTypes,o=i.createClass({displayName:"BonsaiPopoverMenu",propTypes:{menu:n.object,buttonClass:n.string,buttonSize:n.string},render:function(){var p,q;p=i.createElement(g,null);if(this.props.buttonSize||this.props.buttonClass){q={};if(this.props.buttonSize)q.size=this.props.buttonSize;if(this.props.buttonClass)q.className=this.props.buttonClass;p=j(p,q);}return (i.createElement(h,i.__spread({},this.props,{align:'left',className:l(this.props.className,"_5ogx"),menu:this.props.menu}),p));}});e.exports=o;},null);
__d("SpectrumCurrencyScale",["SpectrumBaseNumberScale","SpectrumNumberUtilities"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(k,l){k.tickFormatMaxLength=30;k.tooltipFormat=function(){return function(n){return h.currencyFormatter(l,n);};};k.tickFormat=function(){return function(n){return h.currencyFormatter(l,n);};};k.shift=function(){var n=k.domain(),o=k.range(),p=Math.abs(o[1]-o[0]),q=p/30;if(Math.abs(n[1]-n[0])<q){return Math.pow(10,2);}else return Math.pow(10,0);};var m=k.copy;k.copy=function(){return i(m(),l);};return k;}var j=function(k){return i(g(2),k||h.CURRENCY_FORMATS.USD);};e.exports=j;},null);
__d("InsightsTimeUtils",["InsightsNumUtils","fbt","invariant"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=[{display:{singular:'year',plural:'years',abbreviation:'y'},seconds:31556900,secondsConverter:function(l){return l/31556900;}},{display:{singular:'month',plural:'months',abbreviation:'m'},seconds:2630000,secondsConverter:function(l){return l/2630000;}},{display:{singular:'week',plural:'weeks',abbreviation:'w'},seconds:604800,secondsConverter:function(l){return l/604800;}},{display:{singular:'day',plural:'days',abbreviation:'d'},seconds:86400,secondsConverter:function(l){return l/86400;}},{display:{singular:'hour',plural:'hours',abbreviation:'s'},seconds:3600,secondsConverter:function(l){return l/3600;}},{display:{singular:'minute',plural:'minutes',abbreviation:'m'},seconds:60,secondsConverter:function(l){return l/60;}},{display:{singular:'second',plural:'seconds',abbreviation:'s'},seconds:1,secondsConverter:function(l){return l;}}],k={_convertSeconds:function(l,m){var n=m.secondsConverter(l);return Math.round(n*10)/10;},_getConfigBySeconds:function(l){l=Math.abs(l);for(var m=0;m<j.length;m++){var n=j[m];if(l/n.seconds>=1||m===j.length-1)return n;}i(false);},_getConfigByDisplayKey:function(l){for(var m=0;m<j.length;m++){var n=j[m];if(n.display.singular===l||n.display.plural===l)return n;}i(false);},getValueConverterFunction:function(l){var m=k._getConfigByDisplayKey(l);return m.secondsConverter;},getDisplayKey:function(l){var m=k._getConfigBySeconds(l);return m.display.plural;},secondsToDisplay:function(l,m){var n=k._getConfigBySeconds(l),o=g.prettyFloat(k._convertSeconds(l,n));if(m)return (o==='0')?o:h._({"y":"{numeric time value}y","m":"{numeric time value}m","w":"{numeric time value}w","d":"{numeric time value}d","h":"{numeric time value}h","s":"{numeric time value}s"},[h.param("numeric time value",o),h['enum'](n.display.abbreviation,{y:"y",m:"m",w:"w",d:"d",h:"h",s:"s"})]);if(o==='1'){return (h._({"year":"{numeric time value} year","month":"{numeric time value} month","week":"{numeric time value} week","day":"{numeric time value} day","hour":"{numeric time value} hour","minute":"{numeric time value} minute","second":"{numeric time value} second"},[h.param("numeric time value",o),h['enum'](n.display.singular,{year:"year",month:"month",week:"week",day:"day",hour:"hour",minute:"minute",second:"second"})]));}else return (h._({"years":"{numeric time value} years","months":"{numeric time value} months","weeks":"{numeric time value} weeks","days":"{numeric time value} days","hours":"{numeric time value} hours","minutes":"{numeric time value} minutes","seconds":"{numeric time value} seconds"},[h.param("numeric time value",o),h['enum'](n.display.plural,{years:"years",months:"months",weeks:"weeks",days:"days",hours:"hours",minutes:"minutes",seconds:"seconds"})]));},ySecondsScale:function(l){l.tickFormatMaxLength=46;l.tickFormat=function(){return function(n){return k.secondsToDisplay(n,true);};};l.tooltipFormat=function(){return function(n){return k.secondsToDisplay(n);};};var m=l.copy;l.copy=function(){return k.ySecondsScale(m());};return l;}};e.exports=k;},null);
__d("SpectrumPlotBand.react",["SpectrumConstants","SpectrumDataVisualization","React","ReactART","Rectangle.art","SpectrumUtilities"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=j.Group,n=g.plotBands.LabelPosition,o=i,p=o.PropTypes,q=j.Text,r=i.createClass({displayName:"SpectrumPlotBand",mixins:[h.Mixin],propTypes:{color:p.string,axis:p.oneOf(['x','y']),from:p.number,opacity:p.number,to:p.number},getDefaultProps:function(){return {axis:'y'};},render:function(){var s=this.props,t=s.axis,u=s.from,v=s.label,w=s.theme,x=s.to,y=h.getScaleX(this.props),z=this.props.scaleY,aa='left',ba,ca,da=w.plotBands.label,ea,fa,ga,ha,ia,ja,ka,la;if(t==='x'){la=l.getOuterRange(z);ia=la[0];ja=la[1];if(u===undefined||x===undefined)ka=l.getOuterRange(y);if(u!==undefined){ga=y(u);}else ga=ka[0];if(x!==undefined){ha=y(x);}else ha=ka[1];}else{ka=l.getOuterRange(y);ga=ka[0];ha=ka[1];if(u===undefined||x===undefined)la=l.getOuterRange(z);if(u!==undefined){ia=z(u);}else ia=la[0];if(x!==undefined){ja=z(x);}else ja=la[1];}if(v){ba={fontFamily:da.fontFamily,fontSize:da.fontSize};switch(v.position){case n.BOTTOM_LEFT:ea=ga+da.padding;fa=ia-ba.fontSize-da.padding;break;case n.TOP_LEFT:ea=ga+da.padding;fa=ja+da.padding;break;case n.TOP_RIGHT:aa='right';ea=ha-da.padding;fa=ja+da.padding;break;default:aa='right';ea=ha-da.padding;fa=ia-ba.fontSize-da.padding;}ca=(i.createElement(q,{alignment:aa,fill:v.color||da.fontColor,font:ba,x:ea,y:fa},v.text));}return (i.createElement(m,null,i.createElement(k,{fill:this.props.color||w.plotBands.color,height:ja-ia,opacity:this.props.opacity||w.plotBands.opacity,width:ha-ga,x:ga,y:ia}),ca));}});e.exports=r;},null);
__d("BonsaiTimeSeriesChart",["BonsaiApiDataAdapter","BonsaiApiError","BonsaiApiExamplesDialog","BonsaiApiPeriod","BonsaiApiPromise","BonsaiChartLinkMixin","BonsaiColors","BonsaiConfig","BonsaiContextualHelp","BonsaiDownloadMixin","BonsaiDevsiteStyle","BonsaiErrorNotice","BonsaiLayerModalMixin","BonsaiPopoverMenu","BonsaiStyle","BonsaiText","SpectrumBrush","SpectrumChart","SpectrumComparableColumns","SpectrumCurrencyScale","SpectrumFloatScale","InsightsBackgroundBar.react","InsightsContext","InsightsDateRange.react","InsightsLegend.react","InsightsLegendAreaKey.react","InsightsLegendLineKey.react","InsightsLegendCheckboxKey.react","InsightsLegendScrollableVert.react","InsightsLoadingIndicator.react","InsightsMarker.react","InsightsTable.react","InsightsTimeUtils","InsightsUtils","SpectrumIntegerScale","LeftRight.react","SpectrumLines","SpectrumMarkers","d3/scale/ordinal","SpectrumPercentageScale","SpectrumPlotBand.react","PrettyNum","React","SpectrumStackedAreas","SpectrumTimeScale","SpectrumTooltipMenu","SpectrumXAxis","ReactXUIMenu","SpectrumYAxis","cx","ex","fbt","formatDate","mapObject","sumOfArray","d3/time/day","d3/core/max","d3/core/min","SpectrumConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb){b.__markCompiled&&b.__markCompiled();var mb=b('ReactXUIMenu').Item,nb=b('SpectrumConstants').plotBands.LabelPosition,ob=wa,pb=ob.PropTypes,qb=wa.createClass({displayName:"BonsaiTimeSeriesChart",mixins:[s,p,l],propTypes:{areaOffsets:pb.array,base:pb.string,configs:pb.array.isRequired,height:pb.number,helptext:pb.string,disableCheckboxes:pb.bool,disableEcosystem:pb.bool,disableRangeSelection:pb.bool,categories:pb.array,currency:pb.string,float:pb.bool,percentage:pb.bool,seconds:pb.bool,period:pb.oneOf([j.DAILY,j.HOURLY]),ratio:pb.bool,reverseLegend:pb.bool,threshold:pb.string,width:pb.number,formatHourly:pb.func,setLegend:pb.func,refreshLegend:pb.func},getDefaultProps:function(){return {period:j.DAILY,formatHourly:function(rb){return na.pacificSecondsToUTCDate(rb);}};},componentWillMount:function(){if(this.props.setLegend&&!this.state.hasMetricsThatAreLoading)this.props.setLegend(this.getLegend(this.props,this.state));},componentWillReceiveProps:function(rb){var sb=this._getStateFromProps(rb);this.setState(sb);if(rb.setLegend&&!rb.refreshLegend&&!sb.hasMetricsThatAreLoading)rb.setLegend(this.getLegend(rb,sb));},_getStateFromProps:function(rb){var sb=false,tb=[],ub=[],vb={},wb=false,xb=[];rb.configs.forEach(function(zb){if(zb.data instanceof h){ub.push(zb.data.getMessage());return;}if(zb.data instanceof k){wb=true;return;}if(zb.data instanceof g)zb.data.getMessages().forEach(function(gc){ub.push(gc);});if(zb.data instanceof g)zb.data.setHourlyFormatter(this.props.formatHourly);var ac=zb.series||[];if(ac.length===0&&zb.data)ac=zb.data.getTimeSeries(null,rb.period===j.DAILY);if(ac.length<2)return;var bc={color:zb.color,isEcosystemMetric:false,series:ac,title:zb.title,type:zb.type};if(zb.unselect)xb.push(zb.title);tb.push(bc);var cc=null;if(zb.data instanceof g){cc=zb.data.getApiURI();if(cc&&!vb[cc.toString()])vb[cc.toString()]=cc;}var dc=null;if(!rb.disableEcosystem&&zb.data instanceof g){var ec=zb.data.getEcosystemData();if(ec&&ec instanceof g){dc={color:zb.ecosystem_color,isEcosystemMetric:true,type:'lines'};sb=true;if(rb.percentage||rb.ratio){dc.series=ec.getTimeSeries();}else dc.series=ec.getTrendingTimeSeries(ac[0][1]);var fc=v.otherApps;if(ca.isGame())fc=v.otherGames;dc.title=zb.title+': '+fc;tb.push(dc);bc.hasCorrespondingEcosystemMetric=true;}}},this);var yb=this.state&&Array.isArray(this.state.hiddenMetricTitles)?this.state.hiddenMetricTitles:xb;return {error_notices:ub,hasEcosystemData:sb,hasMetricsThatAreLoading:wb,hiddenMetricTitles:yb,metrics:tb,apiURIs:Object.keys(vb).map(function(zb){return vb[zb];}),showEcosystem:this.state&&this.state.showEcosystem!==undefined?this.state.showEcosystem:false};},getInitialState:function(){return this._getStateFromProps(this.props);},_isEcosystemDisabled:function(){return this.props.disableEcosystem!==undefined&&this.props.disableEcosystem;},range:{max:-Infinity,min:Infinity},legendDimensions:{WIDTH:150,HEIGHT:240},getLegend:function(rb,sb){var tb=[],ub=rb.disableCheckboxes||sb.metrics.filter(function(wb){return !wb.isEcosystemMetric||sb.showEcosystem;}).length<=1;sb.metrics.forEach(function(wb){var xb=null,yb=sb.hiddenMetricTitles.indexOf(wb.title)===-1,zb=rb.setLegend?'medium':'small',ac=wb.title,bc=wb.color;if(!wb.isEcosystemMetric){if(sb.showEcosystem&&!wb.hasCorrespondingEcosystemMetric)return;var cc=wb.title;if(ub){if(!rb.setLegend&&wb.type==='lines'){xb=wa.createElement(ga,{className:"_7l7",color:bc,key:ac},cc);}else xb=wa.createElement(fa,{className:"_7l7",color:bc,key:ac},cc);}else xb=wa.createElement(ha,{checked:yb,color:bc,isInline:!rb.setLegend,key:ac,size:zb,onChange:this.onLegendCheckboxChange.bind(this,wb.title)},cc);tb.push(xb);}else if(sb.showEcosystem)tb.push(wa.createElement(ha,{color:bc,checked:yb,isInline:!rb.setLegend,key:ac,size:zb,onChange:this.onLegendCheckboxChange.bind(this,wb.title)},wb.title));},this);if(rb.reverseLegend)tb.reverse();var vb=wa.createElement(ea,{className:"pls pbm"},tb);if(rb.setLegend)vb=wa.createElement(ia,{className:"_47tf",height:this.legendDimensions.HEIGHT,width:this.legendDimensions.WIDTH},tb);return vb;},getTimeSeriesChart:function(){if(this.state.hasMetricsThatAreLoading)return wa.createElement(ja,null);var rb={areas:[],columns:[],lines:[]},sb={areas:[],columns:[],lines:[]},tb=[],ub={areas:{colors:[]},columns:{colors:[]},lines:{colors:[],markers:false},rangeBands:{outerPadding:.15,padding:.15}};if(!this.state.metrics.length){if(this.state.error_notices.length){this.state.error_notices.forEach(function(hc){tb.push(wa.createElement(r,{className:"_3-8t",message:hc}));});return (wa.createElement("div",null," ",tb," "));}return (wa.createElement(r,{className:"_3-8t",message:v.errors.no_data}));}this.state.metrics.forEach(function(hc){var ic=this.state.hiddenMetricTitles.indexOf(hc.title)==-1;if(!ic)return;if(!hc.isEcosystemMetric){if(this.state.showEcosystem&&!hc.hasCorrespondingEcosystemMetric)return;var jc=this.state.showEcosystem?'lines':hc.type;rb[jc].push(hc.series);sb[jc].push(hc.title);ub[jc].colors.push(hc.color);}else if(this.state.showEcosystem){rb[hc.type].push(hc.series);sb[hc.type].push(hc.title);ub[hc.type].colors.push(hc.color);}},this);this.series=rb;this.titles=sb;var vb=0,wb=hb(rb,function(hc,ic){if(!hc.length)return null;hc.forEach(function(jc){vb=Math.max(vb,jc.length);});this.range.max=kb(hc,function(jc){return kb(jc,function(kc){return jb.utc.offset(kc[0],1);});});this.range.min=lb(hc,function(jc){return lb(jc,function(kc){return kc[0];});});return this._getChart(hc,sb[ic],ic);},this),xb=new Date(this.range.min),yb=new Date(this.range.max),zb,ac;if(this.props.disableRangeSelection||this.props.percentage||this.props.ratio){zb=wa.createElement(w,null);}else{zb=wa.createElement(w,{onSelection:this.onRangeSelection});ac=fb._("Click or drag to select");}var bc=this.props.ratio||this.props.float?aa(3):oa();if(this.props.currency){bc=z(this.props.currency);}else if(this.props.seconds)bc=ma.ySecondsScale(bc);var cc=this.props.period===j.DAILY,dc=ya().domain([xb,yb]).clamp(true).interval(cc?ya.Intervals.Day:ya.Intervals.Hour);dc.tooltipFormat=function(){return function(hc){return gb(hc,cc?'l, M j, Y':'l, M j, Y g:ia',{utc:true});};};var ec=this.props.showPercentTotal&&this.props.data.length>1,fc=this.props.threshold?n.chartThresholds[this.props.threshold]:n.chartThresholds[this.props.helptext],gc=[];if(fc)if(fc.higherIsBetter){gc.push(wa.createElement(ua,{key:"higherIsBetter",color:m.RED50,from:0,to:fc.value,label:{color:m.GREY90,position:nb.TOP_RIGHT,text:fc.text}}));}else gc.push(wa.createElement(ua,{key:"lowerIsBetter",color:m.RED50,from:fc.value,label:{color:m.GREY80,position:nb.BOTTOM_RIGHT,text:fc.text}}));return (wa.createElement("div",null,wa.createElement("div",null,tb),wa.createElement(pa,{direction:"right"},this.props.setLegend?null:this.getLegend(this.props,this.state),this.props.setLegend?null:this.getFeaturesDropdown()),wa.createElement("div",{className:this.props.setLegend?"_2pig":null},wa.createElement(x,{height:this.props.height||u.CHART_HEIGHT,scaleX:dc,scaleY:this.props.percentage?ta():bc,theme:ub,width:this.props.width||(ca.isDevsite()?q.CHART_WIDTH:u.CHART_WIDTH)},wb.areas,wb.columns,wb.lines,this._buildEventLabels(),wa.createElement(ab,{ticks:vb,secondaryTicks:2}),wa.createElement(cb,null),wa.createElement(za,{actionContent:ac,showPercentTotal:ec}),zb,gc))));},render:function(){this._initExportData();return (wa.createElement("div",null,wa.createElement("div",{className:"_5r8_ pdm"},this.getTimeSeriesChart()),wa.createElement("div",{className:"_5x4g"},this.getChartHelpText())));},getChartHelpText:function(){if(this.props.helptext){return wa.createElement(o,{helpKey:this.props.helptext});}else return wa.createElement("div",null);},getExportData:function(){return this._exportData;},getFeaturesDropdown:function(){var rb,sb,tb;rb=[];sb=this.state.apiURIs.map(function(ub){var vb=ub.getPath().split('/');vb=vb[vb.length-1];var wb=ub.getQueryData().breakdowns;wb=wb?Object.keys(wb).map(function(xb){return wb[xb];}).join('-'):'';return [vb,wb].join('-');}).join('+');rb.push(this._getExportLink(this._exportData,sb));this._initExportData();if(!ca.isDevsite())rb.push(this._getChartLink());if(this.state.hasEcosystemData&&!this._isEcosystemDisabled())rb.push(this.getEcosystemLink());if(this.state.apiURIs.length>0)rb.push(this.getApiDialogLink());if(rb.length===0)return null;tb=wa.createElement(bb,null,rb.filter(function(ub){return !!ub;}).map(function(ub,vb){return wa.createElement(mb,{key:'feature-'+vb},ub);}));return wa.createElement(t,{className:"_2pik",menu:tb});},getApiDialogLink:function(){return (wa.createElement(i,{apiURIs:this.state.apiURIs}));},getEcosystemLink:function(){var rb=null;if(this.state.showEcosystem){rb=v.stop_compare;}else if(ca.isGame()){rb=v.compareGames;}else rb=v.compareApps;return wa.createElement("span",{onClick:this._toggleEcosystem},rb);},_toggleEcosystem:function(){this.setState({showEcosystem:!this.state.showEcosystem,hiddenMetricTitles:[]});},_processAreaSeries:function(rb){var sb={},tb=[];tb=rb.map(function(vb){var wb={};vb.forEach(function(xb){sb[xb[0].getTime()]=xb[0];wb[xb[0].getTime()]=xb[1];});return wb;});var ub=Object.keys(sb).sort();return tb.map(function(vb){var wb=[];ub.forEach(function(xb){if(vb[xb]){wb.push([sb[xb],vb[xb]]);}else wb.push([sb[xb],0]);});return wb;});},_getChart:function(rb,sb,tb){var ub,vb,wb,xb,yb;ub=ca.isRealtimeDebug();var zb={data:rb,titles:sb,valueX:function(ac,bc){return ac[0];},valueY:function(ac,bc){return ac[1];}};if(ub)wb=ca.getFullDateRange().until.valueOf();switch(tb){case 'areas':zb.data=this._processAreaSeries(rb);vb=ub?wa.createElement(xa,wa.__spread({},zb,{base:this.props.base,offset:this.props.areaOffsets,partialValue:function(ac,bc){return ac[0].valueOf()==wb;}})):wa.createElement(xa,wa.__spread({},zb,{base:this.props.base,offset:this.props.areaOffsets}));break;case 'columns':vb=wa.createElement(y,wa.__spread({},zb));break;case 'lines':if(ub){vb=wa.createElement(qa,wa.__spread({},zb,{partialValue:function(ac,bc){return ac[0].valueOf()==wb;}}));}else vb=wa.createElement(qa,wa.__spread({},zb));break;default:return null;}xb=[];for(yb=0;yb<rb.length&&yb<sb.length;yb++)xb.push({header:sb[yb],body:rb[yb].map(function(ac){return {time:ac[0],value:ac[1]};})});this._addExportData(xb);return vb;},_exportData:[],_initExportData:function(){this._exportData=[];},_addExportData:function(rb){this._exportData=this._exportData.concat(rb);},_buildEventLabels:function(){var rb=ca.getEventLabels(),sb=this.props.categories||[];sb.push(ca.getActiveSectionName());sb.push(this.props.helptext);rb=rb.filter(function(tb){var ub=na.pacificSecondsToUTCDate(tb.time);return ub>=this.range.min&&ub<=this.range.max;},this);rb=rb.filter(function(tb){for(var ub=0,vb=tb.categories.length;ub<vb;++ub)if(sb.indexOf(tb.categories[ub])!==-1)return true;return false;},this);rb=rb.map(function(tb){return (wa.createElement(ka,{content:tb.label,key:tb.label,x:na.pacificSecondsToUTCDate(tb.time)}));});return (wa.createElement(ra,null,rb));},onRangeSelection:function(rb){this.setState({showModal:true,selectedRange:rb});},onLegendCheckboxChange:function(rb,sb){var tb=this.state.hiddenMetricTitles.indexOf(rb),ub=this.state.hiddenMetricTitles;if(sb&&tb>-1){ub=this.state.hiddenMetricTitles.filter(function(wb){return wb!=this.state.hiddenMetricTitles[tb];},this);}else{var vb=0;this.state.metrics.forEach(function(wb){if(!wb.isEcosystemMetric&&this.state.showEcosystem&&!wb.hasCorrespondingEcosystemMetric)return;if(!this.state.showEcosystem&&wb.isEcosystemMetric)return;vb++;},this);if(!sb&&tb==-1&&this.state.hiddenMetricTitles.length!=vb-1){ub=this.state.hiddenMetricTitles.concat(rb);}else if(this.props.refreshLegend)this.props.refreshLegend();}this.setState({hiddenMetricTitles:ub});},getModalObject:function(){var rb=this.state.selectedRange,sb=(wa.createElement("span",null,v.summary,":",' ',wa.createElement(da,{from:rb[0],to:rb[1],utc:true,includeTime:this.props.period!==j.DAILY}))),tb=this.series.areas.map(this._filterAndSum(rb)),ub=oa().domain([0,Math.max.apply(null,tb)]),vb=ib(tb),wb=this.titles.areas.map(function(dc,ec){return [dc,(wa.createElement(ba,{values:[tb[ec]],scale:ub,colors:sa().range(['#9DACCB'])})),(new va(tb[ec]/vb)).toPrettyPercentage()];},this),xb=wb.length,yb=this.series.lines.map(this._filterAndSum(rb));wb=wb.concat(this.titles.lines.map(function(dc,ec){var fc=[dc,(new va(yb[ec])).enableLongForm().toPretty()];if(xb)fc.push(wa.createElement("noscript",null));return fc;}));var zb=wb.length,ac=this.series.columns.map(this._filterAndSum(rb));wb=wb.concat(this.titles.columns.map(function(dc,ec){var fc=[dc,(new va(ac[ec])).toPretty()];if(zb)fc.push(wa.createElement("noscript",null));return fc;}));var bc=[v.title,v.value];if(xb)bc.push(v.percentage);var cc=(wa.createElement(la,{header:bc,rows:wb,width:"100%"}));return {title:sb,content:cc};},_filterAndSum:function(rb){return function(sb){return ib(sb.map(function(tb){if(this.props.period==j.DAILY){if(tb[0]>jb.offset(rb[0],-1)&&tb[0]<=jb.offset(rb[1],-1))return tb[1];}else if(tb[0]>=rb[0].getTime()&&tb[0]<rb[1].getTime())return tb[1];return 0;},this));}.bind(this);}});e.exports=qb;},null);
__d("BonsaiTimeSeriesChartMixin",["BonsaiColors","InsightsContext","BonsaiStyle","BonsaiTimeSeriesChart","React","mergeDeep","mergeHelpers"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=b('mergeHelpers').ArrayStrategies,n=k,o=n.PropTypes,p={propTypes:{areaOffsets:o.array,base:o.string,currentCard:h.isDevsite()?o.string:o.string.isRequired,data:o.array.isRequired,height:o.number,percentage:o.bool,ratio:o.bool,disableEcosystem:o.bool,theme:o.object,titles:o.array.isRequired,totalData:o.object,width:o.number,unselectTitles:o.array,showPercentTotal:o.bool},_buildSeriesConfigs:function(q){var r=[],s=q[this._chartType].colors,t=0;for(;t<this.props.data.length;++t)r.push({data:this.props.data[t],title:this.props.titles[t],type:this._chartType,color:s[t%s.length],ecosystem_color:s[(t+2)%s.length],unselect:this.props.unselectTitles&&this.props.unselectTitles.indexOf(this.props.titles[t])!=-1});if(this.processTotal&&this.props.totalData){var u=this.processTotal(this.props.totalData,g.GRAY30,s[(t+2)%s.length]);for(var v=0;v<u.length;++v)r.push(u[v]);}return r;},getExportData:function(){return this.refs.chart.getExportData();},render:function(){var q=l(i.CHART_THEME,this.props.theme,m.Clobber);return (k.createElement(j,k.__spread({},this.props,{ref:"chart",configs:this._buildSeriesConfigs(q),theme:q})));}};e.exports=p;},null);
__d("BonsaiLinesTimeSeriesChart",["BonsaiTimeSeriesChartMixin","React"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=h.createClass({displayName:"BonsaiLinesTimeSeriesChart",_chartType:'lines',mixins:[g]});e.exports=i;},null);
__d("BonsaiSectionDataLoaderMixin",["BonsaiApiBatchWrapper","BonsaiApiDataAdapter","BonsaiApiError","BonsaiApiPeriod","BonsaiApiPromise","InsightsContext","BonsaiEcosystem","InsightsUtils","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=5,q={addMetric:function(r,s,t,u,v,w){var x=s||r,y=this._getParams(t);this._getCurrentApiWrapper().add(x,y,this._constructWrapperCallback(r,x,y,u,v),(typeof(w)==='string')?w:'app_insights');},_constructWrapperCallback:function(r,s,t,u,v){return function(w){var x=o({},this.state.apiData),y=this._makeArray(r),z=x,aa=y.length-1,ba=null;y.forEach(function(ca,da){if(da<aa){if(z[ca]===(void 0))z[ca]={};z=z[ca];}ba=ca;},this);if(!w||w.error){z[ba]=v?v(w):(new i(w,t.event_name));}else{z[ba]=u?u(w):(new h(w));if(z[ba] instanceof h)z[ba].setApiParams(l.getObjID(),s,t);}if(this.isMounted())this.setState({apiData:x});}.bind(this);},addMetricWithCustomDates:function(r,s,t,u,v,w){var x=s||r,y=this._getParams(t);y.since=Math.floor(v.since.getTime()/1000);y.until=Math.floor(v.until.getTime()/1000);this._getCurrentApiWrapper().add(x,y,this._constructWrapperCallback(r,x,y,w),u);},addMetricWithEcosystem:function(r,s,t){this.addMetric(r,s,t);this.addMetric(['ecosystem'].concat(this._makeArray(r)),s||r,o({ecosystem:l.getEcosystem()},t));},addEventLabels:function(){this.addMetric(['event_labels','app'],'insights_event_labels',{},function(r){return r.data;},function(r){return [];});this.addMetric(['event_labels','ecosys'],'insights_event_labels',{ecosystem:l.isGame()?m.GAME:m.NON_GAME},function(r){return r.data;},function(r){return [];});},addRangeMetric:function(r,s,t,u){u=u||this.props.visibleDateRange||this.state.visibleDateRange;t=t||{};t.since=n.utcTimeToPacificDay(u.since);t.until=n.utcTimeToPacificDay(u.until);t.period=j.RANGE;this.addMetric(r,s,t);},fetchMetrics:function(r){if(!r)this.setState({apiData:null});if(Array.isArray(this._apiWrappers))for(var s=0;s<this._apiWrappers.length;s++)this._apiWrappers[s].call();},componentWillMount:function(){this._apiWrappers=[];},_finishedFetchingData:function(){this._apiWrappers=[];if(this.isMounted())this.setState({updateSequence:this.state.updateSequence+1});},getInitialState:function(){return {apiData:null,updateSequence:0};},_getApiData:function(r,s){var t=this._makeArray(r),u=s;t.forEach(function(v){if(u===(void 0))return (void 0);u=u[v];});return u;},getRawData:function(r){return this._getData(r,this.state.apiData,true);},getData:function(r){return this._getData(r,this.state.apiData);},_getData:function(r,s,t){if(s===null)return new k();var u=this._getApiData(r,s);if(u===null)return null;if(typeof u==='undefined')return new k();if(u instanceof i){return u;}else if(t){return u;}else{var v=u.getApiParams(),w=this.props.visibleDateRange||this.state.visibleDateRange;if(v.params&&v.params.intervals_to_aggregate===0){return u;}else return u.selectBetween(w.since,w.until);}},getDataWithEcosystem:function(r){return this._getDataWithEcosystem(r,this.state.apiData);},_getDataWithEcosystem:function(r,s){var t=this._getData(['ecosystem'].concat(this._makeArray(r)),s),u=this._getData(r,s);if(u instanceof h)u.setEcosystemData(t);return u;},getFullRangeData:function(r){return this._getApiData(r);},resetMetrics:function(){if(!Array.isArray(this._apiWrappers))return;this._apiWrappers.forEach(function(r){r.abort();});this._apiWrappers=[];this.setState({apiData:null,updateSequence:this.state.updateSequence+1});},_getParams:function(r){var s;if(this.shouldOnlyFetchVisibleDateRange){s=this.state.visibleDateRange||this.props.visibleDateRange;}else s=this.props.fullDateRange;return this._formatParam(o({since:n.utcTimeToPacificDay(s.since),until:n.utcTimeToPacificDay(s.until),summary:true},r||{}));},_formatParam:function(r){var s=o({},r);s.date_format='U';if(r.since)s.since=Math.floor(r.since.getTime()/1000);if(r.until)s.until=Math.floor(r.until.getTime()/1000);return s;},_makeArray:function(r){var s=r;if(!Array.isArray(r))s=[r];return s;},_reloadWhenSessionExpired:function(r){var s=new i(r);if(s.isSessionExpiredError())window.location.reload();},_getCurrentApiWrapper:function(){if(!Array.isArray(this._apiWrappers))this._apiWrappers=[];var r=this._apiWrappers[this._apiWrappers.length-1];if(!(r instanceof g)||r.getBatchSize()>=p){r=new g();r.setOnComplete(this._finishedFetchingData);r.setOnBatchError(this._reloadWhenSessionExpired);this._apiWrappers.push(r);}return r;}};e.exports=q;},null);
__d("DeveloperInsightsLogger",["BanzaiLogger","InsightsContext"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={logAction:function(j){g.log('DeveloperInsightsLoggerConfig',{action:j,appid:parseInt(h.getObjID(),10),section:h.getActiveSectionName(),subsection:h.getActiveCardName()+":"+h.getActiveTabName(),custom_event_name:h.getActiveCustomEventName(),breakdown:h.getActiveBreakdownName()+":"+JSON.stringify(h.getActiveFilters())});}};e.exports=i;},null);
__d("BonsaiTabbedSections",["InsightsContext","DeveloperInsightsLogger","InsightsSectionUtils","InsightsTabbedSections.react","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=k,n=m.PropTypes,o=k.createClass({displayName:"BonsaiTabbedSections",propTypes:{onTabChange:n.func,sectionsKey:n.string},getInitialState:function(){var p=this.getDefaultActiveTabKey();if(g.getActiveCardName()===this.props.sectionsKey)if(g.getActiveTabName())p=g.getActiveTabName();return {activeTabKey:p};},onSectionTabClick:function(p){var q=p.props.sectionKey;g.setActiveCardName(this.props.sectionsKey);g.setActiveTabName(q);g.addCardState(this.props.sectionsKey,{tab:q});h.logAction('tab_transition');if(this.props.onTabChange)this.props.onTabChange(q);this.setState({activeTabKey:q});},getDefaultActiveTabKey:function(){var p=this.props.defaultActiveTab||'',q=i.getSectionByKey(p,this.props.children);if(!q)k.Children.forEach(this.props.children,function(r,s){if(s===0)p=r.key;});return p||'';},render:function(){var p=this.state.activeTabKey,q=i.getSectionByKey(p,this.props.children);if(!q)p=this.getDefaultActiveTabKey();return (k.createElement("div",{className:"_dob"},k.createElement(j,{activeKey:p,onTabClick:this.onSectionTabClick,longNav:true},this.props.children)));}});e.exports=o;},null);
__d("DeveloperAppBonsaiGraph",["ApiClient","BonsaiAdCreateButton","BonsaiApiError","InsightsContext","BonsaiLinesTimeSeriesChart","BonsaiSectionDataLoaderMixin","BonsaiStyle","BonsaiTabbedSections","BonsaiTimeSeriesChart","BonsaiText","InsightsLoadingIndicator.react","InsightsTabbedSection.react","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=s,u=t.PropTypes,v=s.createClass({displayName:"DeveloperAppBonsaiGraph",mixins:[l],propTypes:{appID:u.string.isRequired,adInstallLink:u.string.isRequired,adEngagementLink:u.string.isRequired,token:u.string.isRequired,fullDateRange:u.object,visibleDateRange:u.object,type:u.oneOf(['api','users']).isRequired},getDefaultProps:function(){return {fullDateRange:j.getFullDateRange(),visibleDateRange:j.getDefaultVisibleDateRange()};},componentWillMount:function(){g.setAccessToken(this.props.token);j.setObjID(this.props.appID);if(this.props.type=='api'){this.addMetric('api_calls','api_calls');this.addMetric('api_errors','api_errors');this.addMetric('api_avg_request_time','api_avg_request_time');}else{this.addMetric('dau','facebook_features_daily_active_users',{summary:true});this.addMetric('wau','facebook_features_weekly_active_users',{summary:true});this.addMetric('mau','facebook_features_monthly_active_users',{summary:true});this.addMetric('uninstalls','permission_revocations');this.addMetric('installs','installs');}this.fetchMetrics();},render:function(){if(!this.state.apiData)return s.createElement(q,null);if(this.props.type=='api'){return (s.createElement(n,{defaultActiveTab:"api_calls"},s.createElement(r,{sectionKey:"api_calls",title:p.api_calls},s.createElement(k,{data:[this.getData('api_calls')],titles:[p.api_calls],width:700})),s.createElement(r,{sectionKey:"api_errors",title:p.api_errors},s.createElement(k,{data:[this.getData('api_errors')],titles:[p.api_errors],width:700})),s.createElement(r,{sectionKey:"api_avg_request_time",title:p.api_request_time_avg},s.createElement(k,{data:[this.getData('api_avg_request_time')],titles:[p.api_request_time_avg_label],width:700}))));}else{var w=0,x=['uninstalls','installs'].map(function(ba){return {data:this.getData(ba),title:p[ba],type:'areas',color:m.CHART_THEME.areas.colors[w++],ecosystem_color:m.CHART_THEME.areas.colors[(w+2)]};},this),y=null;if(!(x[0].data instanceof i)&&!(x[1].data instanceof i)){var z=x[1].data.getTimeSeries(),aa=x[0].data.getTimeSeries();y=z.map(function(ba,ca){return aa[ca]?-aa[ca][1]:0;});}return (s.createElement(n,{defaultActiveTab:"active_users"},s.createElement(r,{sectionKey:"active_users",title:p.users_active},s.createElement(h,{text:"installs",link:this.props.adInstallLink}),s.createElement(k,{data:[this.getData('mau'),this.getData('wau'),this.getData('dau')],titles:[p.users_monthly,p.users_weekly,p.users_daily],width:700})),s.createElement(r,{sectionKey:"trend",title:p.users_trend},s.createElement(h,{text:"installs",link:this.props.adInstallLink}),s.createElement(o,{areaOffsets:y,configs:x,disableCheckboxes:true,theme:m.TREND_CHART_THEME,width:700}))));}}});e.exports=v;},null);